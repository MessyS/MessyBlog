$("#s-imgF-photos").change(function(){if($(".img-cont").empty(),this.files.length>=10)$(this).val(""),alert("抱歉!一次最多可上传10张图片");else{let n=0;for(var t=0;t<this.files.length;t++){let o=this.files[t];var e=/^image\//;e.test(o.type)?n+=o.size:alert("文件："+o.name+"不是图片，请选择图片！")}let i=(n/1024/1024).toFixed(2);if(console.log(i),parseInt(i)>50)alert("抱歉，图片总大小不能超过50MB");else for(t=0;t<this.files.length;t++){let e=this.files[t];var o=document.createElement("div");$(".img-cont").append(o);let n=new FileReader;n.onload=function(t){return function(e){t.style.cssText=`\n\t\t\t\t\t\tdisplay:inline-block;\n\t\t\t\t\t\tmargin:15px;\n\t\t\t\t\t\theight:300px;\n\t\t\t\t\t\twidth:300px;\n\t\t\t\t\t\tbox-shadow: 0 2px 5px 2px rgba(0,0,0,.3);\n\t\t\t\t\t\tbackground:url(${e.target.result});\n\t\t\t\t\t\tbackground-size:cover;\n\t\t\t\t\t\tbackground-position:center;\n\t\t\t\t\t`}}(o),n.readAsDataURL(e)}}}),$("button").click(function(){$(".g-body-photosAdd-meg").html('<div style="color:#f0ad4e">数据发送中...</div>');let t=new FormData,e=document.getElementById("s-imgF-photos").files;for(var o=0;o<e.length;o++)t.append("imgF",e[o]);$.ajax({url:"/addPhotos/",type:"POST",contentType:!1,processData:!1,headers:{"X-CSRFToken":$.cookie("csrftoken")},data:t,success:function(){$(".g-body-photosAdd-meg").html('<div style="color:#19b955">图片发布成功!</div>')},error:function(){$(".g-body-photosAdd-meg").html('<div style="color:#c9302c">服务器数据处理失败，详情查看服务器日志!</div>')}})});