$("#s-imgF").change(function(){createReader=function(e,t){var a=new FileReader;a.onload=function(e){var a=new Image;a.onload=function(){var e=this.width,a=this.height;t&&t(e,a)},a.src=e.target.result},a.readAsDataURL(e)};var e=document.getElementById("s-imgF");createReader(e.files[0],function(e,t){x=e,y=t})}),$("#s-publishedArticles").click(function(){if($chkBoxes=$(".g-body-importMD").find("input:checked"),0==$chkBoxes.length)return alert("请至少选择一个分类"),!1;var e=confirm("确认发布吗？");if(e){var t=new FileReader,a=new FormData,o=new FormData($(".g-body-importMD")[0]),n=o.get("htmlF");$("input:checkbox[name=category]:checked").each(function(e){a.append("categoryList",$(this).val())});for(var i=n.name.replace(".html",""),r=document.getElementById("s-imgF").files,s=0;s<r.length;s++)a.append("imgF",r[s]),a.append("x",x),a.append("y",y);t.readAsText(n,"UTF-8"),t.onload=function(){var e=this.result;a.append("fileTitleH",i),a.append("fileContextH",e),$(".g-body-importMD-status").html("文章数据发送中...请稍后"),$(".g-body-importMD-status").show(),$.ajax({url:"/addHF_article/",type:"POST",processData:!1,contentType:!1,headers:{"X-CSRFToken":$.cookie("csrftoken")},data:a,success:function(e){$(".g-body-importMD-status").empty(),$(".g-body-importMD-status").html('<div style="color:#19b955">【'+i+"】发布成功！</div>"),$("#s-htmlF").val(""),$("#s-imgF").val("")},error:function(){$(".g-body-importMD-status").empty(),$(".g-body-importMD-status").html('<div style="color:#c9302c">服务器数据处理失败，详情查看服务器日志</div>')}})}}});