<p></p><p>【教学资源类别】</p><table border="1" cellspacing="0" style="width:0px">	<tbody>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p><strong>序号</strong></p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>类别</strong></p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>打勾&radic;</strong></p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>1</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>学习资源</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>&radic;</strong></p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>2</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>单兵模式赛题资源</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>3</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>分组对抗赛题资源</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>	</tbody></table><p>&nbsp;【教学资源名称】&nbsp;</p><p>渗透测试常用工具-使用nbtscan进行目标机器识别</p><p>&nbsp;【教学资源分类】</p><table border="1" cellspacing="0" style="width:0px">	<tbody>		<tr>			<td style="height:14.0pt; width:106.95pt">			<p><strong>一级大类</strong></p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p><strong>二级大类</strong></p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p><strong>打勾&radic;</strong></p>			</td>		</tr>		<tr>			<td rowspan="5" style="height:14.0pt; width:106.95pt">			<p>1.安全标准</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>法律法规</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>行业标准</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>安全意识</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>应急响应</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>安全评估</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="2" style="height:14.0pt; width:106.95pt">			<p>2.系统安全</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>Windows操作系统安全配置</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>Linux操作系统安全配置</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="2" style="height:14.0pt; width:106.95pt">			<p>3.网络安全</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>网络设备安全</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>网络协议分析</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="7" style="height:14.0pt; width:106.95pt">			<p>4.应用安全</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>Web应用安全</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>数据库安全</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>中间件应用安全</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>应用层协议分析</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p><strong>&radic;</strong></p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>移动应用安全</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>VPN应用</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>恶意代码分析</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="2" style="height:14.0pt; width:106.95pt">			<p>5.密码学</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>密码学原理</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>密码学应用</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="3" style="height:14.0pt; width:106.95pt">			<p>6.渗透测试</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>常用工具</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p><strong>&radic;</strong></p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>脚本编写</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>报告编写</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>	</tbody></table><p>【难度说明】</p><table border="1" cellspacing="0" style="width:0px">	<tbody>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p><strong>序号</strong></p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>难度等级</strong></p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>打勾&radic;</strong></p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>1</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>简单</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>&radic;</strong></p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>2</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>一般</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>3</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>困难</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>4</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>极难</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>	</tbody></table><p>【背景描述】</p><p>XX企业，为加强信息化建设，组建了企业内部网络，用于自身网站的建设，小王是该企业新进网管，承担网络的管理工作。</p><p>现该企业网络存在如下需求：</p><p>&nbsp;查看内网的真实iP及MAC地址</p><p>&nbsp;【实训设备】</p><table border="1" cellspacing="0" style="width:0px">	<tbody>		<tr>			<td style="vertical-align:top; width:146.65pt">			<p>产品型号</p>			</td>			<td style="vertical-align:top; width:166.25pt">			<p>产品描述</p>			</td>			<td style="vertical-align:top; width:69.8pt">			<p>数量</p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:146.65pt">			<p>PY-P8</p>			</td>			<td style="vertical-align:top; width:166.25pt">			<p>实训室安全、应用环境实训平台</p>			</td>			<td style="vertical-align:top; width:69.8pt">			<p>1</p>			</td>		</tr>	</tbody></table><p>【预备知识】</p><p>nbtscan一款用于扫描Windows网络上NetBIOS名字信息的程序。该程序对给出范围内的每一个地址发送NetBIOS状态查询，并且以易读的表格列出接收到的信息，对于每个响应的主机，NBTScan列出它的IP地址、NetBIOS计算机名、登录用户名和MAC地址。但只能用于局域网,NBTSCAN可以取到PC的真实IP地址和MAC地址，如果有&rdquo;ARP攻击&rdquo;在做怪，可以找到装有ARP攻击的PC的IP/和MAC地址。但只能用于局域网,NBTSCAN可以取到PC的真实IP地址和MAC地址，如果有&rdquo;ARP攻击&rdquo;在做怪，可以找到装有ARP攻击的PC的IP/和MAC地址。NBTSCAN可以取到PC的真实IP地址和MAC地址，如果有&rdquo;ARP攻击&rdquo;在做怪，可以找到装有ARP攻击的PC的IP/和MAC地址。总之，NBTSCAN可以取到PC的真实IP地址和MAC地址。</p><p>【实验步骤】</p><p>&nbsp;&nbsp;网络拓扑：bt5--01-server2003</p><p>&nbsp; bt5&nbsp;<br />&nbsp; 用户：root<br />&nbsp; 密码：toor</p><p>&nbsp; windows server 2003<br />&nbsp; 用户：administrator<br />&nbsp; 密码：123456</p><p><strong>【第一步】点击启动选项，启动实验虚拟机。</strong></p><p><strong>【第二步】获取操作机和靶机的IP</strong></p><p>&nbsp;&nbsp; 操作机：<strong>ifconfig</strong></p><p>靶机：ipconfig</p><p>&nbsp;</p><p>&nbsp; 【<strong>使用到的命令</strong>】</p><p>BT5：通过ifconfig获取</p><p>Windows Server：通过ipconfig获取</p><p>&nbsp;</p><p>&nbsp;【<strong>工具原理</strong>】</p><p>&nbsp;&nbsp;&nbsp; &nbsp;在一个局域网中的两台主机，主机A的ip是：172.16.20.134，Mac地址为：00:0c:29:c6:95:4f。主机B的ip为：172.16.20.136，Mac地址为：00-0c-29-6d-80-69，主机名为：TEST－0EAD2165FF。&nbsp;</p><p>&nbsp;当我们使用nbtscan时候 ，A主机首先发送了一个广播包NBNS，询问局域网内，哪个主机的ip是172.16.20.136。B主机在收到此NBNS包后做出相应，发了一个ARP的广播包，询问A主机的MAC地址,此后A主机响应一个ARP数据包,B主机在收到A主机的ARP数据包后得知了A主机的MAC地址，于是返回了一个NBNS相应报，通过NBNS协议告诉A主机，ip为172.16.20.136的主机名为TEST-0EAD2165FF.（网络基本输入/输出系统 (NetBIOS) 名称服务器 (NBNS) 协议是 TCP/IP 上的 NetBIOS (NetBT) 协议族的一部分，它在基于 NetBIOS 名称访问的网络上提供主机名和地址映射方法 NetBIOS是Network Basic Input/Output System的简称，一般指用于局域网通信的一套API）</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p><strong>【第三步】使用wireshark 分析一下数据包</strong></p><p>在一个局域网中的两台主机，主机A的ip是：172.16.20.134，Mac地址为：00:0c:29:c6:95:4f。主机B的ip为：172.16.20.136，Mac地址为：00-0c-29-6d-80-69，主机名为：TEST－0EAD2165FF。&nbsp;</p><p>&nbsp;当我们使用nbtscan时候 ，A主机首先发送了一个广播包NBNS，询问局域网内，哪个主机的ip是172.16.20.136。</p><p>B主机在收到A主机的ARP数据包后得知了A主机的MAC地址，于是返回了一个NBNS相应报，通过NBNS协议告诉A主机，ip为172.16.20.136的主机名为TEST-0EAD2165FF.</p><p>（网络基本输入/输出系统 (NetBIOS) 名称服务器 (NBNS) 协议是 TCP/IP 上的 NetBIOS (NetBT) 协议族的一部分，它在基于 NetBIOS 名称访问的网络上提供主机名和地址映射方法</p><p>NetBIOS是Network Basic Input/Output System的简称，一般指用于局域网通信的一套API）</p><p>&nbsp;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p><strong>【第四步】对主机（Windows Server）进行扫描</strong></p><p>【<strong>第一种</strong>】 nbtscan的基本用法</p><p>&nbsp; 【命令】：nbtscan &nbsp;</p><p>&nbsp; 【例如】：nbtscan</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <img src="api/attachment?type=courseDocument&amp;id=1220" style="height:343px; width:554px" /></p><p>这里是nbtscan的详细命令</p><p>nbtscan [-v] [-d] [-e] [-l] [-t timeout] [-b带宽] [-r] [-q] [-s分隔符] [-m retransmits]（-f filename） |（）</p><p>-v详细输出。打印收到的所有名字</p><p>来自每个主机</p><p>-d转储数据包。打印整个数据包内容。</p><p>-e以/ etc / hosts格式输出格式。</p><p>-l以lmhosts格式输出格式。</p><p>不能与-v，-s或-h选项一起使用。</p><p>-t超时等待超时毫秒为响应。</p><p>默认1000。</p><p>-b带宽输出节流。减慢输出</p><p>所以它不使用更多的带宽bps。</p><p>对慢速链接有用，以至于无处可查</p><p>不要掉线。</p><p>-r使用本地端口137进行扫描。</p><p>-q禁止横幅和错误信息，</p><p>-s分隔符脚本友好的输出。不要打印列和记录标题，用分隔符分隔字段。</p><p>-h为服务打印可读的名称只能与-v选项一起使用。</p><p>-m转发重传次数。默认0。</p><p>-f文件名将IP地址从文件文件名中扫描。</p><p>要扫描什么 可以是单个IP</p><p>像192.168.1.1或者</p><p>地址范围有两种形式之一：</p><p>xxx.xxx.xxx.xxx/xx或xxx.xxx.xxx.xxx-xxx。</p><p>&nbsp;</p><p>&nbsp;&nbsp; 结果可以发现172.15.20.136是存活的</p><p>&nbsp;【<strong>第二种】使用【-r】参数对整个网段（Windows Server）进行存活检验</strong></p><p>&nbsp;【命令】nbtscan -r ip段&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><p>&nbsp;【例如】nbtscan -r 172.16.20.1/24</p><p>&nbsp;<img src="api/attachment?type=courseDocument&amp;id=1217" style="height:143px; width:554px" /></p><p>&nbsp; 通过结果发现不仅仅可以探测出存活的主机 而且我们可以发现靶机的的IP地址 主机名 MAC地址</p><p><strong>&nbsp;</strong><strong>【第三种】使用nbtscan+ip对靶机（Windows Server）进行存活检验</strong></p><p>&nbsp;&nbsp; 【命令】nbtscan+ip&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 【例如】nbtscan 172.16.20.136&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;<img src="api/attachment?type=courseDocument&amp;id=1218" style="height:143px; width:554px" /></p><p>&nbsp;&nbsp;&nbsp;&nbsp; 我们可以发现靶机的的IP地址 主机名 MAC地址</p><p>&nbsp;</p><p>&nbsp;</p><p><strong>&nbsp;</strong><strong>【第四种】使用【-f】参数查看某个文件下IP的存活的机器</strong><strong>&nbsp; </strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 【命令】nbtscan -f 【文件名字】&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 【例如】nbtscan -f alive1.txt&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;</p><p>&nbsp;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <img src="api/attachment?type=courseDocument&amp;id=1215" style="height:257px; width:554px" /></p><p>&nbsp; 因为这个命令主要是探测某个文件夹内的IP地址的系统识别，所以我们这里本身有个ALIVE1.TXT这个文件。我们我们用-f参数+ip地址的文件</p><p>回显结果可以发现 可以探测到主机的地址 名字 以及MAC地址</p><p>&nbsp;</p><p>&nbsp;</p><p><strong>&nbsp;</strong><strong>【第五种】使用【-e】探测系统主机的名字</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 【命令】nbtscan&nbsp; -e 【ip】</p><p>&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;【例如】nbtscan -e &nbsp;192.168.0.177</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 【解释】--e参数的意思是以hosts格式显示出来</p><p>&nbsp;</p><p><strong>【第六种】使用【-q】避免出现没有用的信息</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;【命令】nbtscan&nbsp; -q 【ip】</p><p>&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;【例如】nbtscan -q &nbsp;192.168.0.177</p><p>&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;【解释】但是如果nbtscan 【不存活的机器】 可能会出现一些没有用的信息 这个时候为了避免这些情况 可以使用nbtscan -q 【不存活的机器】 来避免出现这些没用的信息</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>实验结束，关闭虚拟机。</p>