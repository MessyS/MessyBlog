<p></p><p>【教学资源类别】</p><table border="1" cellspacing="0" style="width:0px">	<tbody>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p><strong>序号</strong></p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>类别</strong></p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>打勾&radic;</strong></p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>1</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>学习资源</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>&radic;</strong></p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>2</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>单兵模式赛题资源</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>3</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>分组对抗赛题资源</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>	</tbody></table><p>&nbsp;【教学资源名称】&nbsp;</p><p>渗透测试常用工具-使用dsniff进行网络嗅探</p><p>&nbsp;【教学资源分类】</p><table border="1" cellspacing="0" style="width:0px">	<tbody>		<tr>			<td style="height:14.0pt; width:106.95pt">			<p><strong>一级大类</strong></p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p><strong>二级大类</strong></p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p><strong>打勾&radic;</strong></p>			</td>		</tr>		<tr>			<td rowspan="5" style="height:14.0pt; width:106.95pt">			<p>1.安全标准</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>法律法规</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>行业标准</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>安全意识</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>应急响应</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>安全评估</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="2" style="height:14.0pt; width:106.95pt">			<p>2.系统安全</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>Windows操作系统安全配置</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>Linux操作系统安全配置</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="2" style="height:14.0pt; width:106.95pt">			<p>3.网络安全</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>网络设备安全</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>网络协议分析</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="7" style="height:14.0pt; width:106.95pt">			<p>4.应用安全</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>Web应用安全</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>数据库安全</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:18.35pt; width:237.7pt">			<p>中间件应用安全</p>			</td>			<td style="height:18.35pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>应用层协议分析</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p><strong>&radic;</strong></p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>移动应用安全</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>VPN应用</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>恶意代码分析</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="2" style="height:14.0pt; width:106.95pt">			<p>5.密码学</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>密码学原理</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>密码学应用</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="3" style="height:14.0pt; width:106.95pt">			<p>6.渗透测试</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>常用工具</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p><strong>&radic;</strong></p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>脚本编写</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>报告编写</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>	</tbody></table><p>【难度说明】</p><table border="1" cellspacing="0" style="width:0px">	<tbody>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p><strong>序号</strong></p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>难度等级</strong></p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>打勾&radic;</strong></p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>1</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>简单</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>&radic;</strong></p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>2</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>一般</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>3</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>困难</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>4</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>极难</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>	</tbody></table><p>【背景描述】</p><p>某黑客进入了一家公司内部办公网络局域网，然后他开始对其员工电脑进行攻击，希望以此来获得一些账户、密码、以及机密资料。</p><p>&nbsp;【实训设备】</p><table border="1" cellspacing="0" style="width:0px">	<tbody>		<tr>			<td style="vertical-align:top; width:4.0cm">			<p>产品型号</p>			</td>			<td style="vertical-align:top; width:199.5pt">			<p>产品描述</p>			</td>			<td style="vertical-align:top; width:69.8pt">			<p>数量</p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:4.0cm">			<p>PY-P8</p>			</td>			<td style="vertical-align:top; width:199.5pt">			<p>实训室安全、应用环境实训平台</p>			</td>			<td style="vertical-align:top; width:69.8pt">			<p>1</p>			</td>		</tr>	</tbody></table><p>【预备知识】</p><p>网络嗅探需要用到网络嗅探器，其最早是为网络管理人员配备的工具，有了嗅探器网络管理员可以随时掌握网络的实际情况，查找网络漏洞和检测网络性能，当网络性能急剧下降的时候，可以通过嗅探器分析网络流量，找出网络阻塞的来源。网络嗅探是网络监控系统的实现基础。</p><p>Dsniff是一个著名的网络嗅探工具包。其开发者DugSong早在1999年12月，以密歇根大学CITI研究室的研究成果为基础，开发了这个后来具有很大影响力的网络安全工具包。DugSong开发Dsniff的本意是揭示网络通信的不安全性，借助这个工具包，网络管理员可以对自己的网络进行审计，也包括渗透测试。但万事总有其两面性，Dsniff所带来的负面作用也是&ldquo;巨大&rdquo;的，首先它是可以自由获取的，任何拥有这个工具包的人都可能做&ldquo;非正当&rdquo;的事。其次，Dsniff里面的某些工具，充分揭示了一些安全协议的&ldquo;不安全性&rdquo;，例如针对SSH1和SSL的MITM（Man-In-The-Middle）攻击工具&mdash;SSHmitm和Webmitm。SSH1和SSL都是建立网络通信加密通道的机制，向来被认为是很安全的，但人们在具体使用时，往往因为方便性上的考虑而忽视了某些环节，造成实事上的不安全。所以说，最大的不安全性，往往并不在于对安全的一无所知，而在于过于相信自己的安全。</p><p>【实验步骤】</p><p>&nbsp;&nbsp;网络拓扑：bt5--01-server2003</p><p>&nbsp; bt5&nbsp;<br />&nbsp; 用户：root<br />&nbsp; 密码：toor</p><p>&nbsp; windows server 2003<br />&nbsp; 用户：administrator<br />&nbsp; 密码：123456</p><p><strong>【第一步】点击启动选项，启动实验虚拟机。</strong></p><p><strong>【第二步】获取操作机和靶机的IP</strong></p><p>操作机：ifconfig</p><p>靶机：ipconfig</p><p>&nbsp; <img src="api/attachment?type=courseDocument&amp;id=1114" style="height:228px; width:462px" /></p><p>【使用到的命令】</p><p>BT5：</p><p><strong>【命令】</strong>ifconfig</p><p><strong>【解释】</strong>获取BT5的网卡信息</p><p>Windows Server：</p><p><strong>【命令】</strong>ipconfig</p><p><strong>【解释】</strong>获取Win 2003的网卡信息</p><p><strong>【第三步】使用man命令来看一下帮助信息</strong></p><p>【所使用到的命令】</p><p>【命令】man dsniff</p><p>【解释】查看dsniff参数信息</p><p>&nbsp;<strong>【第四步】dsniff使用过程中常见参数</strong></p><p>&nbsp;&nbsp; -c 打开半双工tcp流，允许在使用arpspoof时进行正确的嗅探操作；</p><p>&nbsp;&nbsp; -d 启动调试模式；</p><p>&nbsp;&nbsp; -f 以/etc/service格式从文件中加载触发器（也就是口令嗅探的服务类型）；</p><p>&nbsp;&nbsp; -I 使用特定的网络接口；</p><p>&nbsp;&nbsp; -m 使用dsniff.magic文件通过在magic文件中定义的特征尝试自动判断协议；</p><p>&nbsp;&nbsp; -n 不执行主机查找；</p><p>&nbsp;&nbsp; -r 从前面保存的会话中读取被嗅探的数据；</p><p>&nbsp;&nbsp; -s 最多对报文的前个字节进行嗅探，如果用户名和口令信息包含在随后的默认1024&nbsp;&nbsp;</p><p>&nbsp;&nbsp; 字节界限中；</p><p>&nbsp;&nbsp; -t 使用格式port /proto =service;来加载一个以逗号界定的触发器集；</p><p><strong>【第五步】先做一个流量转发，然后使用arp欺骗工具arpspoof把流量劫持</strong></p><p><strong>&nbsp;到BT5</strong></p><p>&nbsp;</p><p>【截图说明】这里我们使用了arpspoof实现了一个双欺骗。</p><p>【所使用到的命令】</p><p>【命令】</p><p>arpspoof -i eth0 &ndash;t 192.168.134.163 192.168.134.2</p><p>【解释】</p><p>-i 使用特定的网络接口；</p><p>-t 使用格式port /proto =service;来加载一个以逗号界定的触发器集；</p><p>192.168.134.163：Win2003的IP地址</p><p>192.168.134.2：网关IP地址</p><p><strong>【第六步】启动dsniff，抓取ftp和http流量</strong></p><p>这里我们只是举例，dsniff支持的协议很多，我们将要过滤的端口协议用逗号隔开即<br />&nbsp; 可。</p><p>Dsniff支持协议有：FTP、Telnet、SMTP、HTTP、POP、NNTP、IMAP、SNMP、LDAP、</p><p>Rlogin、RIP、OSPF、PPTP、MS-CHAP、NFS、VRRP、YP/NIS、SOCKS、X11、CVS、IRC、</p><p>AIM、ICQ、Napster、ostgreSQL、Meeting Maker、Citrix ICA、Symantec、pcAnywhere、</p><p>NAI Sniffer、Microsoft SMB、Oracle QL*Net、Sybase及Microsoft SQL认证信息。</p><p>&nbsp;</p><p>&nbsp; <img src="api/attachment?type=courseDocument&amp;id=1120" style="height:80px; width:506px" /></p><p>【所使用到的命令】</p><p>【命令】dsniff -t 21/tcp=ftp,80/tcp=http</p><p>【解释】dsniff密码嗅探器，-t trigger[,...]载入由逗号分割的（触发器）triggers列表，形</p><p>式为port/proto=service，例如，80/tcp=http;</p><p>&nbsp;</p><p><strong>【第七步】使用windows2003，访问baidu.com。</strong></p><p><strong>【第八步】查看抓取到的http数据包</strong></p><p>【截图说明】</p><p>如图，在百度搜索&ldquo;你&rdquo;字，可以在BT5上抓取到了被欺骗主机的流量，倒数第三行，wd=ni参数表名用户在百度搜索的内容，严重泄露个人隐私。因为百度主域名是https流量，所以我们只抓取到了加载过程中的子站流量。</p><p>&nbsp;</p><p>实验结束，关闭虚拟机。</p><p>&nbsp;</p>