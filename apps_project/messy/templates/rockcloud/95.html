<p></p><p>【教学资源类别】</p><table border="1" cellspacing="0" style="width:0px">	<tbody>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p><strong>序号</strong></p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>类别</strong></p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>打勾&radic;</strong></p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>1</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>学习资源</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>&radic;</strong></p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>2</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>单兵模式赛题资源</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>3</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>分组对抗赛题资源</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>	</tbody></table><p>&nbsp;【教学资源名称】&nbsp;</p><p>渗透测试常用工具-使用autoscan进行端口扫描</p><p>&nbsp;【教学资源分类】</p><table border="1" cellspacing="0" style="width:0px">	<tbody>		<tr>			<td style="height:14.0pt; width:106.95pt">			<p><strong>一级大类</strong></p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p><strong>二级大类</strong></p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p><strong>打勾&radic;</strong></p>			</td>		</tr>		<tr>			<td rowspan="5" style="height:14.0pt; width:106.95pt">			<p>1.安全标准</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>法律法规</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>行业标准</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>安全意识</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>应急响应</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>安全评估</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="2" style="height:14.0pt; width:106.95pt">			<p>2.系统安全</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>Windows操作系统安全配置</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>Linux操作系统安全配置</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="2" style="height:14.0pt; width:106.95pt">			<p>3.网络安全</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>网络设备安全</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>网络协议分析</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="7" style="height:14.0pt; width:106.95pt">			<p>4.应用安全</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>Web应用安全</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>数据库安全</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>中间件应用安全</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>应用层协议分析</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p><strong>&radic;</strong></p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>移动应用安全</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>VPN应用</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>恶意代码分析</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="2" style="height:14.0pt; width:106.95pt">			<p>5.密码学</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>密码学原理</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>密码学应用</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="3" style="height:14.0pt; width:106.95pt">			<p>6.渗透测试</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>常用工具</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p><strong>&radic;</strong></p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>脚本编写</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>报告编写</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>	</tbody></table><p>【难度说明】</p><table border="1" cellspacing="0" style="width:0px">	<tbody>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p><strong>序号</strong></p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>难度等级</strong></p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>打勾&radic;</strong></p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>1</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>简单</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>&radic;</strong></p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>2</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>一般</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>3</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>困难</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>4</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>极难</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>	</tbody></table><p>【背景描述】</p><p>XX企业，为加强信息化建设，组建了企业内部网络，用于自身网站的建设，小王是该企业新进网管，承担网络的管理工作。 现该企业网络存在如下需求：</p><p>&nbsp;&nbsp;&nbsp; 查看内网的主机的一些端口开放情况</p><p>&nbsp;【实训设备】</p><table border="1" cellspacing="0" style="width:0px">	<tbody>		<tr>			<td style="vertical-align:top; width:146.65pt">			<p>产品型号</p>			</td>			<td style="vertical-align:top; width:166.25pt">			<p>产品描述</p>			</td>			<td style="vertical-align:top; width:69.8pt">			<p>数量</p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:146.65pt">			<p>PY-P8</p>			</td>			<td style="vertical-align:top; width:166.25pt">			<p>实训室安全、应用环境实训平台</p>			</td>			<td style="vertical-align:top; width:69.8pt">			<p>1</p>			</td>		</tr>	</tbody></table><p>【预备知识】</p><p>AutoScan是一个网络检测软件，可以自动查找网络、可以自动扫描子网，自动探测操作系统等等，使用图形化界面操作起来更加的方便直观，看起来更容易操作，其主要目的是在网络环境中快速识别链接的主机或者网络设备。</p><p>【实验步骤】</p><p>&nbsp;&nbsp;网络拓扑：bt5--01-server2003</p><p>&nbsp; bt5&nbsp;<br />&nbsp; 用户：root<br />&nbsp; 密码：toor</p><p>&nbsp; windows server 2003<br />&nbsp; 用户：administrator<br />&nbsp; 密码：123456</p><p><strong>【第一步】点击启动选项，启动实验虚拟机。</strong></p><p><strong>【第二步】获取操作机和靶机的IP</strong></p><p>&nbsp;&nbsp; 操作机：<strong>ifconfig</strong></p><p>靶机：ipconfig</p><p>&nbsp;</p><p>&nbsp; 【<strong>使用到的命令</strong>】</p><p>BT5：通过ifconfig获取</p><p>Windows Server：通过ipconfig获取</p><p>&nbsp;</p><p>&nbsp;【<strong>工具原理</strong>】</p><p>&nbsp;&nbsp;&nbsp; 以主机A（172.16.20.134）向主机B（172.16.20.136）发送数据为例。当发送数据时，主机A会在自己的ARP缓存表中寻找是否有目标IP地址。如果找到了，也就知道了目标MAC地址为（ 00:0c:29:6d:80:69），直接把目标MAC地址写入帧里面发送就可以了；如果在ARP缓存表中没有找到相对应的IP地址，主机A就会在网络上发送一个广播（ARP request），目标MAC地址是&ldquo;FF.FF.FF.FF.FF.FF&rdquo;，这表示向同一网段内的所有主机发出这样的询 问：&ldquo;172.16.20.136的MAC地址是什么？&rdquo;网络上其他主机并不响应ARP询问，只有主机B接收到这个帧时，才向主机A做出这样的回应（ARP response）：&ldquo;172.16.20.136的MAC地址是（ 00:0c:29:6d:80:69）&rdquo;。 这样，主机A就知道了主机B的MAC地址，它就可以向主机B发送信息了。同时它还更新了自己的ARP缓存表，下次再向主机B发送信息时，直接从ARP缓存表里查找就可以了。ARP缓存表采用了老化机制，在一段时间内如果表中的某一行没有使用，就会被删除，这样可以大大减少ARP缓存表的长度，加快查询速度。</p><p>&nbsp;</p><p><strong>【第三步】使用wireshark 分析一下数据包</strong></p><p>首先使用ARP协议进行存活性的扫描探测 以主机A（172.16.20.134）向主机B（172.16.20.136）发送数据为例。当发送数据时，主机A会在自己的ARP缓存表中寻找是否有目标IP地址。如果找到了，也就知道了目标MAC地址为（ 00:0c:29:6d:80:69），直接把目标MAC地址写入帧里面发送就可以了；如果在ARP缓存表中没有找到相对应的IP地址，主机A就会在网络上发送一个广播（ARP request），目标MAC地址是&ldquo;FF.FF.FF.FF.FF.FF&rdquo;，这表示向同一网段内的所有主机发出这样的询 问：&ldquo;172.16.20.136的MAC地址是什么？&rdquo;网络上其他主机并不响应ARP询问，只有主机B接收到这个帧时，才向主机A做出这样的回应（ARP response）：&ldquo;172.16.20.136的MAC地址是（ 00:0c:29:6d:80:69）&rdquo;。 这样，主机A就知道了主机B的MAC地址，它就可以向主机B发送信息了。同时它还更新了自己的ARP缓存表，下次再向主机B发送信息时，直接从ARP缓存表里查找就可以了。ARP缓存表采用了老化机制，在一段时间内如果表中的某一行没有使用，就会被删除，这样可以大大减少ARP缓存表的长度，加快查询速度。　</p><p>如果主机存活的话 靶机会给BT5发送一个回应包 如果不存活的话 靶机不会对BT5进行一</p><p>个回应，然后使用TCP协议进行端口的探测 TCP是因特网中的传输层协议，使用三次握手</p><p>协议建立连接。当主动方发出SYN连接请求后，等待对方回答</p><p>TCP的三次握手</p><p>TCP的三次握手</p><p>SYN+ACK[1]&nbsp; ，并最终对对方的 SYN 执行 ACK 确认。这种建立连接的方法可以防止产生</p><p>错误的连接，TCP使用的流量控制协议是可变大小的滑动窗口协议。</p><p>&nbsp;</p><p><strong>TCP</strong><strong>三次握手的过程如下</strong>：</p><p>&nbsp;&nbsp; 【1】客户端发送SYN（SEQ=x）报文给服务器端，进入SYN_SEND状态。</p><p>&nbsp;&nbsp; 【2】 服务器端收到SYN报文，回应一个SYN （SEQ=y）ACK(ACK=x+1)报文，进入SYN_RECV</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 状态。</p><p>&nbsp;&nbsp; 【3】客户端收到服务器端的SYN报文，回应一个ACK(ACK=y+1)报文，进入Established</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 状态。</p><p>&nbsp;</p><p><strong>【第四步】对靶机（Windows Server）进行扫描</strong></p><p>在Backtrack-Informatin Gathering-Network Analysis-Network Scan-autoscan打开</p><p>autoscan这个工具</p><p>&nbsp;</p><p>1、打开autoscan 然后点击forward</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <img src="api/attachment?type=courseDocument&amp;id=1109" style="height:378px; width:487px" /></p><p>&nbsp;</p><p>2、点击forward 之后 点击options</p><p>&nbsp;</p><p>我们点击options之后 是对网络的一个配置</p><p>4 默认网关设置成255.255.255.0</p><p>5 设置后面的IP段 因为我这里的IP是172.16.20.x的段 所以 我们这里填写172.16.20</p><p>输完之后点击OK</p><p>6 我们拖动数据条 然后选择我们刚才配置的IP地址和网关 点击Forward</p><p>我们这里继续forward 选择对应的网卡 也许你有多个网卡 选择你要扫描的目标机器的网卡</p><p>&nbsp;</p><p>这里点击Forward</p><p>这里设置完后会自动开始进行扫描</p><p>&nbsp;</p><p>选中我们的靶机 点击summary 因为靶机存在snmp漏洞 可以直接执行命令 对靶机的一些</p><p>信息进行探测&nbsp; 可以发现这个机器开启了4天多了</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><p>点击这个黑点 再点击info 可以看到机器开放的段口 机器名字&nbsp; 工作组等一些信息</p><p>&nbsp;</p><p>我们点击小黑点 然后点击software 主机有snmp漏洞 用这个工具可以看到他现在的进程</p><p>&nbsp;</p><p>点击这个TCP/IP 看到开放的端口 这个开放的端口和通过info查看到的端口是有区别的</p><p>这个tcp/ip是因为存在snmp漏洞 通过命令查看到他开放的端口 ，而info查看到的端口</p><p>是通过黑盒的一个扫描 暴破获取到的 。</p><p>&nbsp;</p><p>14 这个route可以看到路由的一些信息 也是因为snmp漏洞查看到的信息</p><p>&nbsp;</p><p>15 通过snmp漏洞 我们还可以获取到机器开放的服务 mysql apache http等服务</p><p>&nbsp;</p><p>实验结束，关闭虚拟机。</p>