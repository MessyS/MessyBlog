<p></p><p>【教学资源类别】</p><table border="1" cellspacing="0" style="width:0px">	<tbody>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p><strong>序号</strong></p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>类别</strong></p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>打勾&radic;</strong></p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>1</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>学习资源</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>&radic;</strong></p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>2</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>单兵模式赛题资源</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>3</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>分组对抗赛题资源</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>	</tbody></table><p>&nbsp;【教学资源名称】&nbsp;</p><p>渗透测试常用工具-使用admsnmp进行snmp分析</p><p>&nbsp;【教学资源分类】</p><table border="1" cellspacing="0" style="width:0px">	<tbody>		<tr>			<td style="height:14.0pt; width:106.95pt">			<p><strong>一级大类</strong></p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p><strong>二级大类</strong></p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p><strong>打勾&radic;</strong></p>			</td>		</tr>		<tr>			<td rowspan="5" style="height:14.0pt; width:106.95pt">			<p>1.安全标准</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>法律法规</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>行业标准</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>安全意识</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>应急响应</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>安全评估</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="2" style="height:14.0pt; width:106.95pt">			<p>2.系统安全</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>Windows操作系统安全配置</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>Linux操作系统安全配置</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="2" style="height:14.0pt; width:106.95pt">			<p>3.网络安全</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>网络设备安全</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>网络协议分析</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="7" style="height:14.0pt; width:106.95pt">			<p>4.应用安全</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>Web应用安全</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>数据库安全</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>中间件应用安全</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>应用层协议分析</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p><strong>&radic;</strong></p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>移动应用安全</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>VPN应用</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>恶意代码分析</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="2" style="height:14.0pt; width:106.95pt">			<p>5.密码学</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>密码学原理</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>密码学应用</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="3" style="height:14.0pt; width:106.95pt">			<p>6.渗透测试</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>常用工具</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p><strong>&radic;</strong></p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>脚本编写</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>报告编写</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>	</tbody></table><p>【难度说明】</p><table border="1" cellspacing="0" style="width:0px">	<tbody>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p><strong>序号</strong></p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>难度等级</strong></p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>打勾&radic;</strong></p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>1</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>简单</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>&radic;</strong></p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>2</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>一般</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>3</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>困难</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>4</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>极难</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>	</tbody></table><p>【背景描述】</p><p>XX企业，为加强信息化建设，组建了企业内部网络，用于自身网站的建设，小王是该企业新进网管，承担网络的管理工作。</p><p>现该企业网络存在如下需求：</p><p>&nbsp;&nbsp;&nbsp; 暴力其服务器snmp的PJSNMP community字串</p><p>&nbsp;【实训设备】</p><table border="1" cellspacing="0" style="width:0px">	<tbody>		<tr>			<td style="vertical-align:top; width:146.65pt">			<p>产品型号</p>			</td>			<td style="vertical-align:top; width:166.25pt">			<p>产品描述</p>			</td>			<td style="vertical-align:top; width:69.8pt">			<p>数量</p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:146.65pt">			<p>PY-P8</p>			</td>			<td style="vertical-align:top; width:166.25pt">			<p>实训室安全、应用环境实训平台</p>			</td>			<td style="vertical-align:top; width:69.8pt">			<p>1</p>			</td>		</tr>	</tbody></table><p>【预备知识】</p><p>一、SNMP：&ldquo;简单网络管理协议&rdquo;，用于网络管理的协议。SNMP用于网络设备的管理。SNMP的工作方式：管理员需要向设备获取数据，所以SNMP提供了&ldquo;读&rdquo;操作；管理员需要向设备执行设置操作，所以SNMP提供了&ldquo;写&rdquo;操作；设备需要在重要状况改变的时候，向管理员通报事件的发生，所以SNMP提供了&ldquo;Trap&rdquo;操作。</p><p>二、SNMP的基本思想：为不同种类的设备、不同厂家生产的设备、不同型号的设备，定义为一个统一的接口和协议，使得管理员可以是使用统一的外观面对这些需要管理的网络设备进行管理。通过网络，管理员可以管理位于不同物理空间的设备，从而大大提高网络管理的效率，简化网络管理员的工作。</p><p>三、SNMP被设计为工作在TCP/IP协议族上。SNMP基于TCP/IP协议工作，对网络中支持SNMP协议的设备进行管理。所有支持SNMP协议的设备都提供SNMP这个统一界面，使得管理员可以使用统一的操作进行管理，而不必理会设备是什么类型、是哪个厂家生产的。如下图</p><p>&nbsp;</p><p>【工具原理】</p><p>&nbsp;&nbsp;&nbsp; ADMsnmp用于暴力PJSNMP community字串，使用一个预先定义的&ldquo;wordlist&rdquo;。 命令格式：./ADMsnmp 192.168.1.1 -wordfile snmp.password9. Snmp Enum 在获取community后，可以使用snmp enum获取大量关于Cisco，windows和linux的信息，速度较快。Admsnmp爆破过程是通过暴力尝试匹配SNMP的id或密码，使用基于字典的尝试猜测/破解SNMP社区字符串。只读类字符串类似于用户id或密码。它与每个SNMP get请求一起发送，并允许(或拒绝)访问路由器或其他设备的统计信息。如果字符串是正确的，设备将响应请求的信息。如果字符串不正确，设备就会忽略请求而不响应。</p><p>【实验步骤】</p><p>&nbsp; 网络拓扑：bt5--01-server2003</p><p>&nbsp; bt5&nbsp;<br />&nbsp; 用户：root<br />&nbsp; 密码：toor</p><p>&nbsp; windows server 2003<br />&nbsp; 用户：administrator<br />&nbsp; 密码：123456</p><p><strong>【第一步】点击启动选项，启动实验虚拟机。</strong></p><p><strong>【第二步】：获取操作机和靶机的IP</strong></p><p>&nbsp;&nbsp; 操作机：<strong>ifconfig</strong></p><p><strong>【第二步】：在2003server靶机中开启SNMP服务</strong></p><p>1.首先点击 开始-控制面板-添加或删除程序</p><p>2.点击添加/删除Windows组件，在弹出的窗口内，勾选管理和监视工具。鼠标左键点击</p><p>详细信息</p><p>&nbsp;</p><p>3.在管理和监视工具内，勾选WMI SNMP 提供程序。然后点击确定，接下来按照步骤点击</p><p>下一步。待安装完毕</p><p>&nbsp;</p><p>4.打开服务。</p><p>打开服务方式可以在运行处输入services.msc命令进行快速打开服务。</p><p>选择SNMP Service服务。右键点击属性</p><p>&nbsp;</p><p>&nbsp;</p><p>5.然后在弹出框内，点击安全，在安全选项处，添加团体名。另外勾选接受来自任何主机</p><p>的 SNMP数据包。本篇设置团体名为public。然后点击确定。修改后，重启SNMP Service</p><p>服务</p><p>&nbsp;</p><p>&nbsp; 最后在BT5系统下，我们测试windows snmp服务是否安装完毕。</p><p>&nbsp;&nbsp; 执行命令snmpwalk&nbsp; -v 2c -c public 192.168.80.146 .1.3.6.1.2.1.4.20</p><p>&nbsp; 查看返回结果。可以看到返回结果正常。表示配置完成。</p><p>&nbsp;</p><p>&nbsp;</p><p><strong>【第三步】：使用ADMsnmp用与暴力PJSNMP community字串</strong></p><p>1.打开ADMsnmp</p><p>依次Applications&mdash;&gt;BackTrack&mdash;&gt;information Gathering&mdash;&gt;Network Analysis&mdash;&gt;SNMP Analysis&mdash;&gt;admsnmp</p><p>打开之后出现下图</p><p>【命令】:<strong> ./ADMsnmp</strong></p><p>2.输入./ADMsnmp 即可出现ADMsnmp工具的帮助命令；</p><p>ADMsnmp v 0.1 (c) The ADM crew</p><p>./ADMsnmp: &lt;host&gt; [-g,-wordf,-out &lt;name&gt;, [-waitf,-sleep, -manysend,-inter &lt;#&gt;] ]</p><p>&lt;hostname&gt;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 主机扫描</p><p>[-guessname]&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : 猜密码和主机名</p><p>[-wordfile]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: 密码字典</p><p>[-outputfile] &lt;name&gt;&nbsp;&nbsp; : 输出文件</p><p>[-waitfor] &lt;mili&gt;&nbsp; &nbsp;&nbsp;&nbsp; : 每个发送SNMP请求的毫秒时间</p><p>[-sleep] &lt;second&gt; &nbsp;&nbsp;&nbsp;&nbsp; : 扫描过程秒数</p><p>[-manysend] &lt;number&gt;&nbsp;&nbsp; : 多少寄一个包裹到发送的请求</p><p>[-inter] &lt;mili&gt;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; : 时间等在对每个请求之后</p><p>&nbsp;</p><p>3.对靶机进行暴力破解使用命令：</p><p>./ADMsnmp 192.168.80.146 --wordfile snmp.passwd</p><p>即可对目标的snmp进行协议分析</p><p>备注：192.168.80.146 = 目标机器的IP</p><p>&nbsp;</p><p>4.在爆破的同时使用wireshark进行分析admsnmp的猜解过程，抓取到流量如下图所示：</p><p>【备注】上图为打开wireshark并进行抓包</p><p>&nbsp;</p><p>上图表示：抓取的内容为的表示的内容为运用字典猜解团体名/社区名是否为router</p><p>&nbsp;</p><p>上图表示运用字典猜解团体名/社区名是否为public</p><p>&nbsp;</p><p>5.猜解完后使用wireshark并跟随UDP协议数据流可以发现在使用了字典在不断尝试猜测</p><p>破解SNMP社区字符串。</p><p>可以看到破解未成功，大家可以使用大型字典加载到ADMsnmp工具内进行攻击</p><p><strong>【备注】: </strong>&nbsp;&nbsp;&nbsp;&nbsp;</p><p>1.--woadfile&nbsp; &nbsp;&nbsp;&nbsp;指定字典目录</p><p>2.snmap.passwd&nbsp; 字典文件</p><p>&nbsp;</p><p>6.我们打开snmap.passwd字典文件看一下，使用命令如下：<strong>vim snmap.passwd</strong></p><p>可以发现爆破PJSNMP community字串过程中使用的字典内容与wireshark抓获的内容一</p><p>致。使用ADMsnmp暴力PJSNMP community字串的课程完毕。</p><p>&nbsp;</p><p>实验结束，关闭虚拟机。</p>