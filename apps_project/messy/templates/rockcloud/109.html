<p></p><p>【教学资源类别】</p><table border="1" cellspacing="0" style="width:0px">	<tbody>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p><strong>序号</strong></p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>类别</strong></p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>打勾&radic;</strong></p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>1</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>学习资源</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>&radic;</strong></p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>2</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>单兵模式赛题资源</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>3</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>分组对抗赛题资源</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>	</tbody></table><p>&nbsp;【教学资源名称】&nbsp;</p><p>渗透测试常用工具-使用3proxy进行内网穿透</p><p>&nbsp;【教学资源分类】</p><table border="1" cellspacing="0" style="width:0px">	<tbody>		<tr>			<td style="height:14.0pt; width:106.95pt">			<p><strong>一级大类</strong></p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p><strong>二级大类</strong></p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p><strong>打勾&radic;</strong></p>			</td>		</tr>		<tr>			<td rowspan="5" style="height:14.0pt; width:106.95pt">			<p>1.安全标准</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>法律法规</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>行业标准</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>安全意识</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>应急响应</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>安全评估</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="2" style="height:14.0pt; width:106.95pt">			<p>2.系统安全</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>Windows操作系统安全配置</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>Linux操作系统安全配置</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="2" style="height:14.0pt; width:106.95pt">			<p>3.网络安全</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>网络设备安全</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>网络协议分析</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="7" style="height:14.0pt; width:106.95pt">			<p>4.应用安全</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>Web应用安全</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>数据库安全</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>中间件应用安全</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>应用层协议分析</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p><strong>&radic;</strong></p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>移动应用安全</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>VPN应用</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>恶意代码分析</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="2" style="height:14.0pt; width:106.95pt">			<p>5.密码学</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>密码学原理</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>密码学应用</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="3" style="height:14.0pt; width:106.95pt">			<p>6.渗透测试</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>常用工具</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p><strong>&radic;</strong></p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>脚本编写</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>报告编写</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>	</tbody></table><p>【难度说明】</p><table border="1" cellspacing="0" style="width:0px">	<tbody>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p><strong>序号</strong></p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>难度等级</strong></p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>打勾&radic;</strong></p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>1</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>简单</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>&radic;</strong></p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>2</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>一般</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>3</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>困难</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>4</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>极难</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>	</tbody></table><p>【背景描述】</p><p>XX企业，为加强信息化建设，组建了企业内部网络，用于自身网站的建设，并且配有一台运维机，承担运维人员对网络的管理工作。</p><p>现该企业网络存在如下需求： 为了使得通信安全，使用3proxy建立代理进行加密通信。实现内网穿透。</p><p>&nbsp;【实训设备】</p><table border="1" cellspacing="0" style="width:0px">	<tbody>		<tr>			<td style="vertical-align:top; width:146.65pt">			<p>产品型号</p>			</td>			<td style="vertical-align:top; width:166.25pt">			<p>产品描述</p>			</td>			<td style="vertical-align:top; width:69.8pt">			<p>数量</p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:146.65pt">			<p>PY-P8</p>			</td>			<td style="vertical-align:top; width:166.25pt">			<p>实训室安全、应用环境实训平台</p>			</td>			<td style="vertical-align:top; width:69.8pt">			<p>1</p>			</td>		</tr>	</tbody></table><p>【预备知识】</p><p>3proxy是一个俄罗斯人编写的强大的代理软件，支持windows/linux/unix平台，支持网页协议文件传输协议HTTP/HTTPS/FTP代理，支持三个版本的套接字SOCKSv4/SOCKSv4.5/SOCKSv5(socks/socks.exe)代理，支持邮件协议POP3/SMTP代理，支持即时通讯协议AIM/ICQ(icqpr/icqpr.exe)代理，支持MSN 消息 / Live 消息代理 (msnpr/msnpr.exe)，支持DNS缓存,TCP/UDP端口映射。</p><p>&nbsp;【实验原理】</p><p>某公司内的web服务只能在局域网内访问，局域网内可以访问到外网，但外网无法直接访问到该公司的WEB服务。现通过内网的一台运维作为中间代理，使用3proxy代理将该公司局域网内web服务映射到该运维机PC1（BT5），并以此实现攻击机通过访问场景中的运维机PC1,利用3proxy代理实现公司局域网的内网穿透，访问到该公司的web服务。</p><p>【实验步骤】</p><p>&nbsp; 网络拓扑：bt5--01-server2003</p><p>&nbsp; bt5&nbsp;<br />&nbsp; 用户：root<br />&nbsp; 密码：toor</p><p>&nbsp; windows server 2003<br />&nbsp; 用户：administrator<br />&nbsp; 密码：123456</p><p><strong>【第一步】点击启动选项，启动实验虚拟机。</strong></p><p><strong>【第二步】：获取操作机和靶机的IP</strong></p><p>操作机（攻击机）：ifconfig</p><p>靶机：ifconfig</p><p>跳板（代理）机：ifconfig</p><p>&nbsp;</p><p><strong>【第三步】查看3proxy.sample配置文件</strong></p><p>&nbsp; <img src="api/attachment?type=courseDocument&amp;id=1020" style="height:373px; width:536px" /></p><p><strong>【用到的命令】</strong></p><p>cat /pentest/backdoors/3proxy/cfg/3proxy.cfg.sample</p><p>【备注】：</p><p>【External】连接互联网的地址，出站接口端地址</p><p>【internal】用于监听入站（内部）的请求</p><p><strong>【第四步】编辑并配置3proxy配置文件</strong></p><p>配置代理主机IP：192.168.8.159 web服务器IP：192.168.8.167</p><p>&nbsp; <img src="api/attachment?type=courseDocument&amp;id=1023" style="height:34px; width:509px" /></p><p>&nbsp; <img alt="IMG_256" src="api/attachment?type=courseDocument&amp;id=1021" style="height:157px; width:280px" /></p><p><strong>【用到的命令】</strong></p><p>【切换到/pentest/backdoors/3proxy/cfg/目录】：</p><p>cd&nbsp; /pentest/backdoors/3proxy/cfg/</p><p>【编辑配置3proxy.cfg配置文件】：</p><p>vi&nbsp;/pentest/backdoors/3proxy/cfg/3proxy.cfg</p><p>【tcppm 80 192.168.8.167 80】:配置需要使用代理的ip和服务端口</p><p><strong>【备注】</strong>External(在局域网内外部接口这里用不到)，internal(改成web服务器的IP，前提是你要在web服务器主机上(不是自己)配置好自己的web服务器</p><p><strong>第五步：配置服务端web服务</strong></p><p>在Windows 2003 配置并启动apache服务</p><p>&nbsp; <img src="api/attachment?type=courseDocument&amp;id=1019" style="height:254px; width:368px" /></p><p>&nbsp;&nbsp; <img src="api/attachment?type=courseDocument&amp;id=1016" style="height:316px; width:514px" /></p><p><strong>【第六步】未启用3proxy前，攻击机无法访问</strong></p><p>&nbsp;&nbsp; <img src="api/attachment?type=courseDocument&amp;id=1017" style="height:411px; width:516px" /></p><p><strong>【第七步】开启3proxy代理</strong></p><p>&nbsp;&nbsp;&nbsp; <img src="api/attachment?type=courseDocument&amp;id=1014" style="height:357px; width:505px" /></p><p><strong>【用到的命令】</strong></p><p>【./3proxy cfg/3proxy.cfg】：启动代理服务</p><p><strong>【第八步】</strong>在攻击机上访问<a href="http://192.168.8.159/info.php">http://192.168.8.159/</a></p><p>&nbsp;&nbsp;&nbsp; <img src="api/attachment?type=courseDocument&amp;id=1022" style="height:398px; width:493px" /></p><p><strong>【备注】</strong><a href="http://192.168.8.159">http://192.168.8.159</a> 实际上不存在，通过3proxy中间代理把192.168.8.167的80 web服务映射到了192.168.8.167的80端口，实现攻击机通过访问场景中的运维机PC1,利用3proxy代理实现公司局域网的内网穿透，访问到该公司的web服务。</p><p>&nbsp;</p><p>实验结束，关闭虚拟机。</p>