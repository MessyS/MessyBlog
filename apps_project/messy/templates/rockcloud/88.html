<p></p><p>【教学资源类别】</p><table border="1" cellspacing="0" style="width:0px">	<tbody>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p><strong>序号</strong></p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>类别</strong></p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>打勾&radic;</strong></p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>1</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>学习资源</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>&radic;</strong></p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>2</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>单兵模式赛题资源</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>3</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>分组对抗赛题资源</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>	</tbody></table><p>&nbsp;【教学资源名称】&nbsp;</p><p>&nbsp; 渗透测试常用工具-使用arping进行目标机器识别</p><p>&nbsp;【教学资源分类】</p><table border="1" cellspacing="0" style="width:0px">	<tbody>		<tr>			<td style="height:14.0pt; width:106.95pt">			<p><strong>一级大类</strong></p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p><strong>二级大类</strong></p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p><strong>打勾&radic;</strong></p>			</td>		</tr>		<tr>			<td rowspan="5" style="height:14.0pt; width:106.95pt">			<p>1.安全标准</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>法律法规</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>行业标准</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>安全意识</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>应急响应</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>安全评估</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="2" style="height:14.0pt; width:106.95pt">			<p>2.系统安全</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>Windows操作系统安全配置</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>Linux操作系统安全配置</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="2" style="height:14.0pt; width:106.95pt">			<p>3.网络安全</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>网络设备安全</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>网络协议分析</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="7" style="height:14.0pt; width:106.95pt">			<p>4.应用安全</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>Web应用安全</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>数据库安全</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>中间件应用安全</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>应用层协议分析</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p><strong>&radic;</strong></p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>移动应用安全</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>VPN应用</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>恶意代码分析</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="2" style="height:14.0pt; width:106.95pt">			<p>5.密码学</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>密码学原理</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>密码学应用</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="3" style="height:14.0pt; width:106.95pt">			<p>6.渗透测试</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>常用工具</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p><strong>&radic;</strong></p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>脚本编写</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>报告编写</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>	</tbody></table><p>【难度说明】</p><table border="1" cellspacing="0" style="width:0px">	<tbody>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p><strong>序号</strong></p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>难度等级</strong></p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>打勾&radic;</strong></p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>1</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>简单</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>&radic;</strong></p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>2</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>一般</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>3</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>困难</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>4</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>极难</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>	</tbody></table><p>【背景描述】</p><p>XX企业，为加强信息化建设，组建了企业内部网络，用于自身网站的建设，小王是该企业新进网管，承担网络的管理工作。</p><p>现该企业网络存在如下需求：</p><p>&nbsp;查看内网的主机的存活进行检测</p><p>&nbsp;【实训设备】</p><table border="1" cellspacing="0" style="width:0px">	<tbody>		<tr>			<td style="vertical-align:top; width:146.65pt">			<p>产品型号</p>			</td>			<td style="vertical-align:top; width:166.25pt">			<p>产品描述</p>			</td>			<td style="vertical-align:top; width:69.8pt">			<p>数量</p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:146.65pt">			<p>PY-P8</p>			</td>			<td style="vertical-align:top; width:166.25pt">			<p>实训室安全、应用环境实训平台</p>			</td>			<td style="vertical-align:top; width:69.8pt">			<p>1</p>			</td>		</tr>	</tbody></table><p>【预备知识】</p><p>1 、arping命令是用于发送arp请求到一个相邻主机的工具，arping使用arp数据包，通过ping</p><p>命令检查设备上的硬件地址。能够测试一个ip地址是否是在网络上已经被使用，并能够获取更多</p><p>设备信息。功能类似于ping。</p><p>2、由于防火墙的使用等原因，部分主机会出现ping不通的状况。Arping通过发送Arp request</p><p>的方式进行测试（直连网络），确定一个特定的ip在线。</p><p>3、arping给一个主机，发送arp或者ICMP包，并打印回复的消息。主机可以以hostname，ip</p><p>地址，mac地址等形式出现。一个请求包，每隔一秒发送一次。为什么说发送的包有arp和icmp</p><p>呢，因为，当主机为ip或hostname的时候，发送的是arp请求包。当主机是mac地址的时候，</p><p>发送的则是icmp的echo广播包</p><p>【实验步骤】</p><p>&nbsp; 网络拓扑：bt5--01-server2003</p><p>&nbsp; bt5&nbsp;<br />&nbsp; 用户：root<br />&nbsp; 密码：toor</p><p>&nbsp; windows server 2003<br />&nbsp; 用户：administrator<br />&nbsp; 密码：123456</p><p><strong>【第一步】点击启动选项，启动实验虚拟机。</strong></p><p><strong>【第二步】获取操作机和靶机的IP</strong></p><p>&nbsp;&nbsp; 操作机：<strong>ifconfig</strong></p><p>靶机：ipconfig</p><p>&nbsp;</p><p>&nbsp; 【<strong>使用到的命令</strong>】</p><p>BT5：通过ifconfig获取</p><p>Windows Server：通过ipconfig获取</p><p>&nbsp;</p><p>&nbsp;【<strong>工具原理</strong>】</p><p>&nbsp;&nbsp;&nbsp; 以主机A（172.16.20.134）向主机B（172.16.20.136）发送数据为例。当发送数据时，主机A会在自己的ARP缓存表中寻找是否有目标IP地址。如果找到了，也就知道了目标MAC地址为（ 00:0c:29:6d:80:69），直接把目标MAC地址写入帧里面发送就可以了；如果在ARP缓存表中没有找到相对应的IP地址，主机A就会在网络上发送一个广播（ARP request），目标MAC地址是&ldquo;FF.FF.FF.FF.FF.FF&rdquo;，这表示向同一网段内的所有主机发出这样的询 问：&ldquo;172.16.20.136的MAC地址是什么？&rdquo;网络上其他主机并不响应ARP询问，只有主机B接收到这个帧时，才向主机A做出这样的回应（ARP response）：&ldquo;172.16.20.136的MAC地址是（ 00:0c:29:6d:80:69）&rdquo;。 这样，主机A就知道了主机B的MAC地址，它就可以向主机B发送信息了。同时它还更新了自己的ARP缓存表，下次再向主机B发送信息时，直接从ARP缓存表里查找就可以了。ARP缓存表采用了老化机制，在一段时间内如果表中的某一行没有使用，就会被删除，这样可以大大减少ARP缓存表的长度，加快查询速度。</p><p>&nbsp;</p><p><strong>【第三步】使用wireshark 分析一下数据包</strong></p><p>在终端输入wireshark 然后点击第一个按钮</p><p>选择网卡 网卡是eth0</p><p>&nbsp;</p><p>点击start然后进行抓包的分析</p><p>我们使用一个简单的命令进行抓包</p><p>这个时候 可以看到wireshark获取到的数据包</p><p>&nbsp;</p><p>通过结果可以发现 我们发包4次 通过wireshark抓到了8个包 其中4个是请求的包 4个是返回包 发包方式是ARP的方式</p><p>看一下arp的数据包 下图这一个是请求包</p><p>我们分析一下 请求包包含哪些内容</p><p>从截图中可以看出硬件类型（hardware type）是以太网1（0x0001）。协议类型（protocol&nbsp; type）为0x0800，表示使用ARP的协议类型为IPV4。硬件地址长度（hardware size）为6。协议地址长度（protocol size）为4，操作类型（opcode）为0x0001，表示报文类型为ARP请求。发送方硬件地址（sender&nbsp; MAC&nbsp; address）为00:0c:29：c6：95:4f，定义了发送方的硬件地址。发送方协议地址（sender&nbsp; IP&nbsp; address）为172.16.20.134，定义发送方的协议地址。目的硬件地址（target&nbsp; MAC&nbsp; address）为00:00:00:00:00:00，表示是广播地址。目的协议地址（target&nbsp; IP&nbsp; address）为172.16.20.136，定义目的设备的协议地址。</p><p>&nbsp;</p><p>我们分析一下返回包包含哪些信息</p><p>&nbsp;</p><p>硬件类型为以太网。协议类型为IP（0x0800）。硬件地址长度为6，协议地址长度为4，操作类型为2（0x0002），表示为ARP应答报文。发送方硬件地址为00:0c：29:6d：80：69，发送方IP地址为172.16.20.136。目的硬件地址为00:0c:29：c6：95:4f，目的协议地址为172.16.20.134。</p><p>&nbsp;</p><p>然后我们再看一下</p><p>这是帧的头部，目的地址为全FF表示广播询问，源地址本地的mac地址，类型字段是0x0806为arp协议字段。</p><p>&nbsp;</p><p><strong>【第四步】对主机（Windows Server）进行扫描</strong></p><p>【<strong>第一种</strong>】 使用arping +ip进行扫描</p><p>&nbsp; 【命令】：arping 【IP】&nbsp;</p><p>&nbsp; 【例如】：arping 172.16.20.136</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <img src="api/attachment?type=courseDocument&amp;id=1074" style="height:121px; width:476px" /></p><p>&nbsp;&nbsp; 结果可以发现172.15.20.136是存活的</p><p>&nbsp;【<strong>第二种】使用【-g】参数对整个网段（Windows Server）进行存活检验</strong></p><p>&nbsp;【命令】fping -g 【ip】 &gt;&gt; xxx.txt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><p>&nbsp;【例如】fping -g 172.16.20.1/24 &gt;&gt; alive.txt</p><p>&nbsp;【解释】使用-g 参数的意思是我们对整个网段进行存活扫描 &gt;&gt;alive.txt是把扫描的结&nbsp;</p><p>&nbsp; 果保存在alive.txt这个文件里面 然后我们扫描完后cat alive.txt便可查看扫描情况</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <img src="api/attachment?type=courseDocument&amp;id=1072" style="height:161px; width:484px" /></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <img src="api/attachment?type=courseDocument&amp;id=1065" style="height:321px; width:498px" /></p><p>&nbsp; 在这里我们使用【fping &ndash;g】 对主机进行存活检查 但是在检测的过程中出现很多命</p><p>&nbsp; 令我们以随便一个命令讲解一下，意思就是说172.16.20.134通过ICMP协议这个主机对</p><p>&nbsp; 172.16.20.251 发送数据包 但是没有接受到回显所以就是Unreachable Cat alive.txt&nbsp;</p><p>&nbsp; 从回显的结果中看到有4台机器是存活的其他剩下的都是unreachable不存活的</p><p>&nbsp;</p><p><strong>&nbsp;</strong><strong>【第三种】使用【-ag】参数对整个网段（Windows Server）进行存活检验</strong></p><p>&nbsp;&nbsp; 【命令】fping -ag 【ip】 &gt;&gt; xx.txt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 【例如】fping -ag 172.16.20.1/24 &gt;&gt; alive1.txt</p><p>【解释】使用-ag和-g的区别就在于回显的结果 -ag仅仅回显存活的ip地址 -g的意思是</p><p>&nbsp;回显整个网段所有IP的存活情况</p><p>&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;<img src="api/attachment?type=courseDocument&amp;id=1068" style="height:317px; width:474px" /></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 结果发现也是存活的主机的IP地址 这样看起来更加的直观</p><p>&nbsp;</p><p><strong>&nbsp;</strong><strong>【第四种】使用【-ug】参数查看主机（Windows Server）查看整个局域网内</strong></p><p><strong>&nbsp; </strong><strong>部存活的机器</strong><strong>&nbsp; </strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 【命令】fping -ug 【ip】 &gt;&gt;xx.txt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 【例如】fping -ug 172.16.20.1/24 &gt;&gt; unlive.txt</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <img src="api/attachment?type=courseDocument&amp;id=1061" style="height:304px; width:490px" /></p><p>&nbsp;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <img src="api/attachment?type=courseDocument&amp;id=1059" style="height:329px; width:494px" /></p><p>&nbsp;&nbsp; 通过结果我们也是可以发现在整个局域网内不存活的主机的IP地址</p><p>&nbsp;</p><p><strong>&nbsp;</strong><strong>【第五种】使用【-s】统计结果</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 【命令】fping -ag 【ip】 -s -n &gt;&gt;xx.txt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 【例如】fping -ag 172.16.20.1/24 -s -n &gt;&gt;test2.txt</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 【解释】-s 参数是对最后结果的一个统计 -n 将目标以主机名或域名显示</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <img src="api/attachment?type=courseDocument&amp;id=1066" style="height:156px; width:502px" /></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <img src="api/attachment?type=courseDocument&amp;id=1076" style="height:316px; width:503px" /></p><p>这里可以发现有4个是存活的&nbsp; 剩下的是不存活的。</p><p>&nbsp;</p><p>&nbsp;</p><p>实验结束，关闭虚拟机。</p>