<p></p><p>【教学资源类别】</p><table border="1" cellspacing="0" style="width:0px">	<tbody>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p><strong>序号</strong></p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>类别</strong></p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>打勾&radic;</strong></p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>1</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>学习资源</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>&radic;</strong></p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>2</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>单兵模式赛题资源</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>3</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>分组对抗赛题资源</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>	</tbody></table><p>&nbsp;【教学资源名称】&nbsp;</p><p>渗透测试常用工具-使用amap进行服务枚举</p><p>&nbsp;【教学资源分类】</p><table border="1" cellspacing="0" style="width:0px">	<tbody>		<tr>			<td style="height:14.0pt; width:106.95pt">			<p><strong>一级大类</strong></p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p><strong>二级大类</strong></p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p><strong>打勾&radic;</strong></p>			</td>		</tr>		<tr>			<td rowspan="5" style="height:14.0pt; width:106.95pt">			<p>1.安全标准</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>法律法规</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>行业标准</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>安全意识</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>应急响应</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>安全评估</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="2" style="height:14.0pt; width:106.95pt">			<p>2.系统安全</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>Windows操作系统安全配置</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>Linux操作系统安全配置</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="2" style="height:14.0pt; width:106.95pt">			<p>3.网络安全</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>网络设备安全</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>网络协议分析</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="7" style="height:14.0pt; width:106.95pt">			<p>4.应用安全</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>Web应用安全</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>数据库安全</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>中间件应用安全</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>应用层协议分析</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p><strong>&radic;</strong></p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>移动应用安全</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>VPN应用</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>恶意代码分析</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="2" style="height:14.0pt; width:106.95pt">			<p>5.密码学</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>密码学原理</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>密码学应用</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="3" style="height:14.0pt; width:106.95pt">			<p>6.渗透测试</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>常用工具</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p><strong>&radic;</strong></p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>脚本编写</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>报告编写</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>	</tbody></table><p>【难度说明】</p><table border="1" cellspacing="0" style="width:0px">	<tbody>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p><strong>序号</strong></p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>难度等级</strong></p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>打勾&radic;</strong></p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>1</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>简单</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>&radic;</strong></p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>2</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>一般</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>3</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>困难</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>4</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>极难</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>	</tbody></table><p>【背景描述】</p><p>XX企业，为加强信息化建设，组建了企业内部网络，用于自身网站的建设，小王是该企业新进网管，</p><p>承担网络的管理工作。现该企业网络存在如下需求：</p><p>查看内网的开放的端口</p><p>&nbsp;【实训设备】</p><table border="1" cellspacing="0" style="width:0px">	<tbody>		<tr>			<td style="vertical-align:top; width:146.65pt">			<p>产品型号</p>			</td>			<td style="vertical-align:top; width:166.25pt">			<p>产品描述</p>			</td>			<td style="vertical-align:top; width:69.8pt">			<p>数量</p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:146.65pt">			<p>PY-P8</p>			</td>			<td style="vertical-align:top; width:166.25pt">			<p>实训室安全、应用环境实训平台</p>			</td>			<td style="vertical-align:top; width:69.8pt">			<p>1</p>			</td>		</tr>	</tbody></table><p>【预备知识】</p><p>Amap是一个服务器枚举工具，使用这个工具可以识别正运行在一个指定端口或一个范围端口上的应用</p><p>程序 ，Amap 是一个检特定端口上运行的应用程序的工具。Amap 工作原理是向端口发送触发报文，</p><p>然后将收到的回应与数据 库中结果进行匹配，并打印匹配的应用程序。</p><p>【实验步骤】</p><p>&nbsp; 网络拓扑：bt5--01-server2003</p><p>&nbsp; bt5&nbsp;<br />&nbsp; 用户：root<br />&nbsp; 密码：toor</p><p>&nbsp; windows server 2003<br />&nbsp; 用户：administrator<br />&nbsp; 密码：123456</p><p><strong>【第一步】点击启动选项，启动实验虚拟机。</strong></p><p><strong>【第二步】获取操作机和靶机的IP</strong></p><p>&nbsp;&nbsp; 操作机：ifconfig</p><p>靶机：ipconfig</p><p>&nbsp;</p><p><strong>【使用到的命令】</strong></p><p>BT5：通过ifconfig获取</p><p>Windows Server：通过ipconfig获取</p><p>&nbsp;</p><p><strong>【工具原理】</strong></p><p>TCP是因特网中的传输层协议，使用三次握手协议建立连接。当主动方发出SYN连接请求后，等待对</p><p>方回答</p><p>&nbsp;&nbsp;&nbsp; TCP的三次握手</p><p>&nbsp;&nbsp;&nbsp; TCP的三次握手</p><p>SYN+ACK[1]&nbsp; ，并最终对对方的 SYN 执行 ACK 确认。这种建立连接的方法可以防止产生错误的连接，</p><p>TCP使用的流量控制协议是可变大小的滑动窗口协议。</p><p>TCP三次握手的过程如下：</p><p>&nbsp;&nbsp; 【1】客户端发送SYN（SEQ=x）报文给服务器端，进入SYN_SEND状态。</p><p>&nbsp;&nbsp; 【2】服务器端收到SYN报文，回应一个SYN （SEQ=y）ACK(ACK=x+1)报文，进入SYN_RECV状态。</p><p>&nbsp;&nbsp; 【3】客户端收到服务器端的SYN报文，回应一个ACK(ACK=y+1）报文，进入Established状态。</p><p>&nbsp;</p><p><strong>【第三步】使用wireshark 分析一下数据包</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp; 使用一个简单的命令amap 172.16.20.136然后打开wireshark分析</p><p>&nbsp;</p><p>&nbsp;&nbsp;&nbsp;&nbsp; <img src="api/attachment?type=courseDocument&amp;id=1044" style="height:345px; width:493px" /></p><p>&nbsp;&nbsp;&nbsp; 这里首先通过arp协议进行主机存活的检测 如果存在将会通过TCP协议对端口进行扫描</p><p>&nbsp;&nbsp;&nbsp; <img src="api/attachment?type=courseDocument&amp;id=1053" style="height:350px; width:492px" /></p><p>&nbsp;</p><p>&nbsp;&nbsp;&nbsp; 这里是BT5对靶机的一个发包 端口 3389</p><p>&nbsp;&nbsp;&nbsp; <img src="api/attachment?type=courseDocument&amp;id=1057" style="height:350px; width:492px" /></p><p>&nbsp;&nbsp;&nbsp; 这里是靶机对BT5的一个回应3389的包</p><p>&nbsp;&nbsp;&nbsp; <img src="api/attachment?type=courseDocument&amp;id=1055" style="height:361px; width:499px" /></p><p>这个包是BT5收到靶机回应的包 回应一个报文，进入Established状态。&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <img src="api/attachment?type=courseDocument&amp;id=1052" style="height:355px; width:486px" /></p><p>&nbsp;</p><p><strong>【第四步】对主机（Windows Server）进行扫描</strong></p><p>【第一种】 使用amap查看常用命令</p><p>&nbsp; 【命令】：amap&nbsp;</p><p>&nbsp; 【例如】：amap</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="api/attachment?type=courseDocument&amp;id=1048" style="height:359px; width:510px" /></p><p>&nbsp; -A发送触发器并分析响应（默认）</p><p>&nbsp;&nbsp;-B 扫banner信息</p><p>&nbsp;&nbsp;-P没有横幅或应用程序的东西 - 是一个（全连接）端口扫描仪</p><p>选项：</p><p>&nbsp;&nbsp;-1只发送触发到一个端口，直到第一次识别。 ！</p><p>&nbsp;&nbsp;-6使用IPv6而不是IPv4</p><p>&nbsp;&nbsp;-b打印响应的ascii横幅</p><p>&nbsp;&nbsp;-i FILE Nmap机器可读输出文件从中读取端口</p><p>&nbsp;&nbsp;-u在命令行上指定的端口是UDP（默认是TCP）</p><p>&nbsp;&nbsp;-R / -S不要识别RPC / SSL服务</p><p>&nbsp;&nbsp;-H不要发送标记为可能有害的应用程序触发器</p><p>&nbsp;&nbsp;-U不要转储无法识别的响应（更适合脚本）</p><p>&nbsp;&nbsp;-d转储所有响应</p><p>&nbsp;&nbsp;-v详细模式，使用两次（或更多！）进行调试（不推荐:-)</p><p>&nbsp;&nbsp;-q更友好的显示，屏蔽未定义的一些信息</p><p>&nbsp;&nbsp;-c CONS并行连接数量（默认32，最大256）</p><p>&nbsp;&nbsp;-C RETRIES连接超时时重新连接的数量（请参阅-T）（默认值3）</p><p>&nbsp;&nbsp;-T SEC连接尝试的连接超时（以秒为单位）（默认值为5）</p><p>&nbsp;&nbsp;-t SEC响应等待超时（秒）（默认5）</p><p>&nbsp;&nbsp;-p PROTO只发送此协议的触发器（例如ftp）</p><p>&nbsp;&nbsp;目标端口要扫描的目标地址和端口（除了-i）</p><p>&nbsp; amap是识别目标端口上的应用程序协议的工具。</p><p>&nbsp;</p><p>【第二种】amap 【ip】对靶机（Windows Server）进行端口扫描</p><p>&nbsp;&nbsp; 【命令】amap 【IP】 端口</p><p>&nbsp;&nbsp; 【例如】amap 172.16.20.136 1-1000</p><p>&nbsp;&nbsp; 【解释】通过扫描结果可以看到1-100之间的端口开放的情况下面这些IP+端口是没有开放的端</p><p>&nbsp;&nbsp; 口</p><p>&nbsp;</p><p><strong>【第三种】使用【-q】参数对靶机进行端口扫描时候去除一些没用的信息</strong></p><p>【命令】amap 【IP】 端口 -q</p><p>【例如】amap 172.16.20.136 1-1000 -q</p><p>【解释】相比上次没有-q的结果看 使用-q可以更加直观的看到开放端口的情况</p><p>&nbsp;</p><p>&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;<img src="api/attachment?type=courseDocument&amp;id=1046" style="height:380px; width:519px" /></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><p><strong>【第四种】使用【-u】参数查看靶机banner信息 </strong></p><p>【命令】amap -u 【ip】 端口&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><p>【例如】amap -u 172.16.20.136 21</p><p>【解释】(banner是标志的意思，比如你访问ftp的服务器的时候服务器返回给你的标题)</p><p>通过结果可以看到我们访问ftp时候返回给我们的信息</p><p>&nbsp;</p><p>&nbsp;</p><p><strong>【第五种】使用【-u】参数查看靶机（Windows Server）开放的udp端口</strong></p><p>【命令】amap -u 【ip】 端口 -q&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><p>【例如】amap -u 172.16.20.136 1-1000 -q</p><p>【解释】我们可以发现1-1000之间 开放的udp所开放的端口</p><p>&nbsp;</p><p>&nbsp;</p><p><strong>【第六种】使用【-b】参数查看靶机（Windows Server）回显的信息</strong></p><p>【命令】amap -b 【ip】 端口&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><p>【例如】amap -b 172.16.20.136 1-1000</p><p>【解释】意思就是说我们访问80端口 80端口回显给我们的信息</p><p>&nbsp;</p><p>&nbsp;</p><p>实验结束，关闭虚拟机。</p>