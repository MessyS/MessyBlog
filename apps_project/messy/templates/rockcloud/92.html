<p></p><p>【教学资源类别】</p><table border="1" cellspacing="0" style="width:0px">	<tbody>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p><strong>序号</strong></p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>类别</strong></p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>打勾&radic;</strong></p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>1</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>学习资源</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>&radic;</strong></p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>2</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>单兵模式赛题资源</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>3</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>分组对抗赛题资源</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>	</tbody></table><p>&nbsp;【教学资源名称】&nbsp;</p><p>渗透测试常用工具-使用onesixtyone进行目标机器识别</p><p>&nbsp;【教学资源分类】</p><table border="1" cellspacing="0" style="width:0px">	<tbody>		<tr>			<td style="height:14.0pt; width:106.95pt">			<p><strong>一级大类</strong></p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p><strong>二级大类</strong></p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p><strong>打勾&radic;</strong></p>			</td>		</tr>		<tr>			<td rowspan="5" style="height:14.0pt; width:106.95pt">			<p>1.安全标准</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>法律法规</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>行业标准</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>安全意识</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>应急响应</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>安全评估</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="2" style="height:14.0pt; width:106.95pt">			<p>2.系统安全</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>Windows操作系统安全配置</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>Linux操作系统安全配置</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="2" style="height:14.0pt; width:106.95pt">			<p>3.网络安全</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>网络设备安全</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>网络协议分析</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="7" style="height:14.0pt; width:106.95pt">			<p>4.应用安全</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>Web应用安全</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>数据库安全</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>中间件应用安全</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>应用层协议分析</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p><strong>&radic;</strong></p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>移动应用安全</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>VPN应用</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>恶意代码分析</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="2" style="height:14.0pt; width:106.95pt">			<p>5.密码学</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>密码学原理</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>密码学应用</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="3" style="height:14.0pt; width:106.95pt">			<p>6.渗透测试</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>常用工具</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p><strong>&radic;</strong></p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>脚本编写</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>报告编写</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>	</tbody></table><p>【难度说明】</p><table border="1" cellspacing="0" style="width:0px">	<tbody>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p><strong>序号</strong></p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>难度等级</strong></p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>打勾&radic;</strong></p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>1</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>简单</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>&radic;</strong></p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>2</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>一般</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>3</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>困难</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>4</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>极难</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>	</tbody></table><p>【背景描述】</p><p>XX企业，为加强信息化建设，组建了企业内部网络，用于自身网站的建设，小王是该企业新进网管，承担网络的管理工作。</p><p>现该企业网络存在如下需求：</p><p>&nbsp;查看企业snmp是否有弱口令</p><p>&nbsp;【实训设备】</p><table border="1" cellspacing="0" style="width:0px">	<tbody>		<tr>			<td style="vertical-align:top; width:146.65pt">			<p>产品型号</p>			</td>			<td style="vertical-align:top; width:166.25pt">			<p>产品描述</p>			</td>			<td style="vertical-align:top; width:69.8pt">			<p>数量</p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:146.65pt">			<p>PY-P8</p>			</td>			<td style="vertical-align:top; width:166.25pt">			<p>实训室安全、应用环境实训平台</p>			</td>			<td style="vertical-align:top; width:69.8pt">			<p>1</p>			</td>		</tr>	</tbody></table><p>【预备知识】</p><p>&nbsp;&nbsp;&nbsp; 简单网络管理协议（SNMP），由一组网络管理的标准组成，包含一个应用层协议（application layer</p><p>protocol）、数据库模型（database schema）和一组资源对象。该协议能够支持网络管理系统，用以</p><p>监测连接到网络上的设备是否有任何引起管理上关注的情况。该协议是互联网工程工作小组（IETF，</p><p>Internet Engineering Task Force）定义的internet协议簇的一部分。SNMP的目标是管理互联网</p><p>Internet上众多厂家生产的软硬件平台，因此SNMP受Internet标准网络管理框架的影响也很大。SNMP</p><p>已经出到第三个版本的协议，其功能较以前已经大大地加强和改进了。</p><p>&nbsp; &nbsp; 通过SNMP服务，渗透测试人员可以获取大量的设备和系统信息。在这些信息中，系统信息最为关键，</p><p>&nbsp;&nbsp; 如操作系统版本、内核版本等。Kali Linux提供一个简易SNMP扫描器onesixtyone。该工具可以批</p><p>&nbsp;&nbsp; 量获取目标的系统信息。同时，该工具还支持SNMP社区名枚举功能。安全人员可以很轻松获取多台</p><p>&nbsp;&nbsp; 主机的系统信息，完成基本的信息收集工作。</p><p>&nbsp;</p><p>【实验步骤】</p><p>&nbsp;&nbsp;网络拓扑：bt5--01-server2003</p><p>&nbsp; bt5&nbsp;<br />&nbsp; 用户：root<br />&nbsp; 密码：toor</p><p>&nbsp; windows server 2003<br />&nbsp; 用户：administrator<br />&nbsp; 密码：123456</p><p><strong>【第一步】点击启动选项，启动实验虚拟机。</strong></p><p><strong>【第二步】获取操作机和靶机的IP</strong></p><p>&nbsp;&nbsp; 操作机：<strong>ifconfig</strong></p><p>靶机：ipconfig</p><p>&nbsp;</p><p>&nbsp; 【<strong>使用到的命令</strong>】</p><p>BT5：通过ifconfig获取</p><p>Windows Server：通过ipconfig获取</p><p>&nbsp;</p><p>&nbsp;【<strong>工具原理</strong>】</p><p>&nbsp;&nbsp;&nbsp; SNMPv1是SNMP协议的最初版本，提供最小限度的网络管理功能。SNMPv1的SMI</p><p>和MIB都比较简单，且存在较多安全缺陷。SNMPv1采用团体名认证。团体名的作用类</p><p>似于密码，用来限制NMS对Agent的访问。如果SNMP报文携带的团体名没有得到</p><p>NMS/Agent的认可，该报文将被丢弃。</p><p>报文格式如下</p><p>SNMP消息主要由Version、Community、SNMP PDU几部分构成。其中，报文中的主要字</p><p>段定义如下：</p><p>&nbsp;</p><p>【Version】SNMP版本</p><p>【Community】团体名，用于Agent与NMS之间的认证。团体名有可读和可写两种，如</p><p>果是执行Get、GetNext操作，则采用可读团体名进行认证；如果是执行Set操作，则</p><p>采用可写团体名进行认证。</p><p>【Request ID】用于匹配请求和响应，SNMP给每个请求分配全局唯一的ID。</p><p>【Error status】用于表示在处理请求时出现的状况，包括noError、tooBig、</p><p>noSuchName、badValue、readOnly、genErr。</p><p>【Error index】差错索引。当出现异常情况时，提供变量绑定列表（Variable bindings）</p><p>中导致异常的变量的信息。</p><p>【Variable bindings】变量绑定列表，由变量名和变量值对组成。</p><p>【enterprise】Trap源（生成Trap信息的设备）的类型。</p><p>【Agent addr】Trap源的地址。</p><p>【Generic trap】通用Trap类型，包括coldStart、warmStart、linkDown、linkUp、</p><p>authenticationFailure、egpNeighborLoss、enterpriseSpecific。</p><p>【Specific trap】企业私有Trap信息。</p><p>【Time stamp】上次重新初始化网络实体和产生Trap之间所持续的时间，即sysUpTime</p><p>对象的取值。</p><p>&nbsp;</p><p>&nbsp;</p><p><strong>【第三步】使用wireshark 分析一下数据包</strong></p><p>&nbsp;</p><p>使用一个简单的命令onesixtyone -c dict.txt 192.168.20.136进行抓包</p><p>从图中可以看到通过枚举不同的community 通过对返回的数据包长度进行判断</p><p>结果看到public这个长度与其他的不同</p><p>&nbsp;</p><p>从上图可以看到，SNMPv1版本的安全性不太好，可以抓取到community也即是团体名；tarp操作只有发送报文没有响应报文。</p><p>&nbsp;</p><p><strong>【第四步】对靶机（Windows Server）进行扫描</strong></p><p>在终端中输入命令打开工具</p><p>先输入cd /pentest/enumeration/snmp/onesixtyone 调到onesixtyone的目录下</p><p>&nbsp;</p><p>然后运行./onesixtyone打开onesixtyone这个工具</p><p>通过结果可以发现onesixtyone命令的意思</p><p>-c字典的文件名</p><p>-i主机的地址</p><p>-o 把扫描的结果保存到某个文件里面</p><p>-d调试模式，请使用两次以获取更多信息</p><p>&nbsp;</p><p>-w n在发送数据包（默认为10）之间等待n毫秒（1/1000秒）</p><p>-q&nbsp; 不要打印日志到标准输出，使用-l</p><p>例子：</p><p>onesixtyone -c dict.txt 192.168.4.1 public</p><p>onesixtyone -c dict.txt -i hosts -o my.log -w 100</p><p>&nbsp;</p><p>2 、因为onesixtyone就只有个命令 所以我们使用这个命令对靶机进行snmp弱口令</p><p>的扫描</p><p>&nbsp;</p><p>命令 <strong>onesixtyone -c dict.txt 192.168.4.1 </strong></p><p>&nbsp;<img src="api/attachment?type=courseDocument&amp;id=1249" style="height:82px; width:480px" /></p><p>命令的意思是-c 的是字典名 因为这个工具默认给的字典就是dic.txt我们就使用这</p><p>个默认的字典&nbsp;&nbsp; 通过结果 可以看到 操作系统是windows版本的信息 能看到</p><p>windows版本信息是snmp的口令被爆破出来 然后通过snmp执行命令 查看主机的版本</p><p>信息</p><p>&nbsp;</p><p>实验结束，关闭虚拟机。</p>