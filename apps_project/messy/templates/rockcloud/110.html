<p></p><p>&nbsp;Web应用程序SQL Inject安全攻防</p><p><strong>&nbsp;</strong></p><p><strong>任务环境说明：</strong></p><p>服务器场景：WebServ2003（用户名：administrator；密码：空）</p><p>服务器场景操作系统：Microsoft Windows2003 Server</p><p>服务器场景安装服务/工具1：Apache2.2；</p><p>服务器场景安装服务/工具2：Php6；</p><p>服务器场景安装服务/工具3：Microsoft SqlServer2000；</p><p>服务器场景安装服务/工具4：EditPlus；</p><p>网络拓扑：01-WebServ2003--02-AttWinXp</p><p>windows server 2003<br />用户：administrator<br />密码：空</p><p>1.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 进入WebServ2003服务器场景，分析源文件login.php，找到提交的变量名，并将全部的变量名作为Flag（形式：[变量名1&amp;变量名2&amp;变量名3&hellip;&amp;变量名n]）提交；</p><p>查看sserver2003的IP地址</p><p>访问WebServ2003服务器场景，分析源文件login.php</p><p>&nbsp;</p><p>Flag：[usernm&amp;passwd]</p><p>&nbsp;</p><p>&nbsp;</p><p>2.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 对该任务题目1页面注入点进行SQL注入渗透测试，使该Web站点可通过万能用户名、任意密码登录，并将万能用户名字符串中的固定部分去掉所有空格后作为Flag提交;</p><p>&nbsp;</p><p>通过万能用户名、任意密码登录&nbsp;&nbsp;&nbsp;</p><p>Flag：&#39;unionselect*fromusers--</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>3.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 进入WebServ2003服务器场景，&quot;/&quot;-&gt;&quot;Employee Information Query&quot;，查看该页面源文件，找到提交的变量名，并将全部的变量名作为Flag（形式：[变量名1&amp;变量名2&amp;变量名3&hellip;&amp;变量名n]）提交；</p><p>&nbsp;</p><p>查看&quot;/&quot;-&gt;&quot;Employee Information Query&quot;页面源文件</p><p>Flag：[usernm]</p><p>&nbsp;</p><p>4.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 对该任务题目3页面注入点进行渗透测试，根据注入&ldquo;_&rdquo;的返回结果确定是注入点，并将注入后页面回显第1行作为Flag提交；</p><p>&nbsp;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <img src="api/attachment?type=courseDocument&amp;id=1581" style="height:159.6pt; width:370.2pt" /></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <img src="api/attachment?type=courseDocument&amp;id=1571" style="height:199.8pt; width:284.4pt" /> &nbsp;</p><p>Flag：Username：admin</p><p>&nbsp;</p><p>5.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 通过对该任务题目4页面注入点进行SQL注入渗透测试，在WebServ2003服务器场景中添加账号&ldquo;Hacker&rdquo;，密码&ldquo;P@ssword&rdquo;，并将注入语句作为Flag提交；</p><p>&nbsp;</p><p>对任务题目4页面注入点进行SQL注入渗透测试，在WebServ2003服务器场景中添加账号&ldquo;Hacker&rdquo;，密码&ldquo;P@ssword&rdquo;</p><p>&nbsp;<img src="api/attachment?type=courseDocument&amp;id=1580" style="height:165pt; width:366.6pt" /></p><p>可在server2003上查看用户是否添加成功</p><p>&nbsp;</p><p>Flag：&lsquo;exec master.dbo.xp_cmdshell &lsquo;net user Hacker P@ssword /add&rsquo;--</p><p>&nbsp;</p><p>6.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 进入WebServ2003服务器场景的C:\AppServ\www目录，找到QueryCtrl.php程序，使用EditPlus工具分析并修改PHP源文件，使之可以抵御SQL注入渗透测试，并将修改后的PHP源文件中的F1和F2作为Flag（形式：[F1]+[ F2]）提交；</p><p>&nbsp;</p><p>使用EditPlus工具分析并修改PHP源文件</p><p>&nbsp;<img src="api/attachment?type=courseDocument&amp;id=1585" style="height:345.6pt; width:6in" /></p><p>修改后</p><p>Flag：[addslashes]+[ str_replace]</p><p>&nbsp;</p><p>&nbsp;</p><p>7.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 再次对该任务题目6页面注入点进行渗透测试，验证此次利用注入点对该WebServ2003服务器场景进行SQL注入渗透测试无效，并将测试后页面回显倒数第2行作为Flag提交。</p><p>&nbsp;</p><p>再次对该任务题目6页面注入点进行渗透测试</p><p>Flag：Bad Keyword！</p><p>&nbsp;</p>