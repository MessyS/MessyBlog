<p></p><p>【教学资源类别】</p><table border="1" cellspacing="0" style="width:0px">	<tbody>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p><strong>序号</strong></p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>类别</strong></p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>打勾&radic;</strong></p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>1</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>学习资源</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>&radic;</strong></p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>2</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>单兵模式赛题资源</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>3</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>分组对抗赛题资源</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>	</tbody></table><p>&nbsp;【教学资源名称】&nbsp;</p><p>渗透测试常用工具-使用fping进行目标机器识别</p><p>&nbsp;【教学资源分类】</p><table border="1" cellspacing="0" style="width:0px">	<tbody>		<tr>			<td style="height:14.0pt; width:106.95pt">			<p><strong>一级大类</strong></p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p><strong>二级大类</strong></p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p><strong>打勾&radic;</strong></p>			</td>		</tr>		<tr>			<td rowspan="5" style="height:14.0pt; width:106.95pt">			<p>1.安全标准</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>法律法规</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>行业标准</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>安全意识</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>应急响应</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>安全评估</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="2" style="height:14.0pt; width:106.95pt">			<p>2.系统安全</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>Windows操作系统安全配置</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>Linux操作系统安全配置</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="2" style="height:14.0pt; width:106.95pt">			<p>3.网络安全</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>网络设备安全</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>网络协议分析</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="7" style="height:14.0pt; width:106.95pt">			<p>4.应用安全</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>Web应用安全</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>数据库安全</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>中间件应用安全</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>应用层协议分析</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p><strong>&radic;</strong></p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>移动应用安全</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>VPN应用</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>恶意代码分析</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="2" style="height:14.0pt; width:106.95pt">			<p>5.密码学</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>密码学原理</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>密码学应用</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td rowspan="3" style="height:14.0pt; width:106.95pt">			<p>6.渗透测试</p>			</td>			<td style="height:14.0pt; width:237.7pt">			<p>常用工具</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p><strong>&radic;</strong></p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>脚本编写</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="height:14.0pt; width:237.7pt">			<p>报告编写</p>			</td>			<td style="height:14.0pt; width:81.45pt">			<p>&nbsp;</p>			</td>		</tr>	</tbody></table><p>【难度说明】</p><table border="1" cellspacing="0" style="width:0px">	<tbody>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p><strong>序号</strong></p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>难度等级</strong></p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>打勾&radic;</strong></p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>1</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>简单</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p><strong>&radic;</strong></p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>2</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>一般</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>3</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>困难</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:142.0pt">			<p>4</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>极难</p>			</td>			<td style="vertical-align:top; width:142.05pt">			<p>&nbsp;</p>			</td>		</tr>	</tbody></table><p>【背景描述】</p><p>XX企业，为加强信息化建设，组建了企业内部网络，用于自身网站的建设，小王是该企业新进网管，承担网络的管理工作。现该企业网络存在如下需求：<strong>查看内网的主机数量以及存活率</strong></p><p>&nbsp;【实训设备】</p><table border="1" cellspacing="0" style="width:0px">	<tbody>		<tr>			<td style="vertical-align:top; width:146.65pt">			<p>产品型号</p>			</td>			<td style="vertical-align:top; width:166.25pt">			<p>产品描述</p>			</td>			<td style="vertical-align:top; width:69.8pt">			<p>数量</p>			</td>		</tr>		<tr>			<td style="vertical-align:top; width:146.65pt">			<p>PY-P8</p>			</td>			<td style="vertical-align:top; width:166.25pt">			<p>实训室安全、应用环境实训平台</p>			</td>			<td style="vertical-align:top; width:69.8pt">			<p>1</p>			</td>		</tr>	</tbody></table><p>【预备知识】</p><p>一、Fping程序类似于ping。Fping与ping不同的地方在于，fping可以在命令行中指定要ping的主机数量范围，也可以指定含有要ping的主机列表文件。</p><p>&nbsp;</p><p>二、与ping要等待某一主机连接超时或发回反馈信息不同，fping给一个主机发送完数据包后，马上给下一个主机发送数据包，实现多主机同时ping。如果某一主机ping通，则此主机将被打上标记，并从等待列表中移除，如果没ping通，说明主机无法到达，主机仍然留在等待列表中，等待后续操作。</p><p><strong>PS</strong><strong>：（ping是通过ICMP（网络控制信息协议InternetControl Message Protocol）协议回复请求以检测主机是否存在）</strong></p><p>&nbsp;</p><p>三、UNIX和Windows环境都有许多可以用来进行ICMPping扫描的工具。fping是UNIX环境里久经考验的ping扫描工具之一。早期的ping扫描工具大都需要等待前一个被探测主机返回某种响应消息之后才能继续探测下一台主机是否存在，但fping却能以轮转方式并行地发出大量的ping请求。这么一来，用fping工具去扫描多个IP地址的速度要比ping快很多。</p><p>&nbsp;</p><p>【实验步骤】</p><p>&nbsp;&nbsp;网络拓扑：bt5--01-server2003</p><p>&nbsp; bt5&nbsp;<br />&nbsp; 用户：root<br />&nbsp; 密码：toor</p><p>&nbsp; windows server 2003<br />&nbsp; 用户：administrator<br />&nbsp; 密码：123456</p><p><strong>【第一步】点击启动选项，启动实验虚拟机。</strong></p><p><strong>【第二步】获取操作机和靶机的IP</strong></p><p>&nbsp;&nbsp; 操作机：<strong>ifconfig</strong></p><p>靶机：ipconfig</p><p>&nbsp;</p><p>&nbsp; 【<strong>使用到的命令</strong>】</p><p>BT5：通过ifconfig获取</p><p>Windows Server：通过ipconfig获取</p><p>&nbsp;</p><p>&nbsp;【<strong>工具原理</strong>】</p><p>&nbsp;&nbsp;&nbsp; 假定主机A的IP地址是172.16.20.134，主机B的IP地址是1172.16.20.136，都在同子网内，则当你在主机A上运行&ldquo;fping 172.16.20.136&rdquo;后，都发生了些什么呢?</p><p>首先，fping命令会构建一个固定格式的ICMP请求数据包，然后由ICMP协议将这个数据包连 同 地址&ldquo;172.16.20.136&rdquo;一起交给IP层协议（和ICMP一样，实际上是一组后台运行的进程），IP层协议将以地址&ldquo;172.16.20.136&rdquo;作为目的地址，本机IP地址作为源地址，加上一些其他的控制信息，构建一个IP数据包，并在一个映射表中查找出IP地址172.16.20.136所对应的物理地址（也叫MAC地址，熟悉网卡配置的朋友不会陌生，这是数据链路层协议构建数据链路层的传输单元&mdash;&mdash;帧所必需的），一并交给数据链路层。后者构建一个数据帧，目的地址是IP层传过来的物理地址，源地址则是本机的物理地址，还要附加上一些控制信息，依据以太网的介质访问规则，将它们传送出去。</p><p>&nbsp;</p><p><strong>【第三步】使用wireshark 分析一下数据包</strong></p><p>1.&nbsp;&nbsp;&nbsp; <strong>使用一个简单</strong>的fping 命令</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <img src="api/attachment?type=courseDocument&amp;id=1137" style="height:370px; width:489px" /></p><p>我们可以发现有两个包 还是一个发送包 一个返回包 fping 使用的是ICMP协议进行传输</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>2.&nbsp;&nbsp;&nbsp; 我们先来分析一下请求包</p><p>&nbsp;&nbsp;&nbsp;&nbsp; <img src="api/attachment?type=courseDocument&amp;id=1146" style="height:365px; width:495px" /></p><p>&nbsp;</p><p>&nbsp;&nbsp;&nbsp;&nbsp; 【Type】:8</p><p>&nbsp;&nbsp;&nbsp;&nbsp; 【Code】:0 意思是类型为8 代码为0 根据类型表可知道为回显请求报文</p><p>&nbsp;&nbsp;&nbsp;&nbsp; 【Checksum】:0x6c5e 是检验和</p><p>【Sequence number （BE）：0 （0x0000）】 序列号是0x0000 和响应包中序列号的类型&nbsp;&nbsp;</p><p>&nbsp;一样</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 我们再来看一下返回包的主要内容</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <img src="api/attachment?type=courseDocument&amp;id=1150" style="height:376px; width:494px" /></p><p>&nbsp; 我们分析一下返回包的主要信息</p><p>&nbsp; 【Tyep】:0</p><p>&nbsp; 【Code :0】 意思是类型为0 代码为0 根据类型表可知道为回显请求报文</p><p>&nbsp;&nbsp;&nbsp;&nbsp; 【Checksum:0x745e】 是检验和</p><p>&nbsp; 【Sequence number （BE）：0 （0x0000）】 序列号是0x0000 和请求包中序列号的类型</p><p>&nbsp;&nbsp; 一样</p><p>&nbsp;&nbsp;&nbsp;&nbsp; 【Response time 】是响应的时间</p><p>&nbsp;</p><p><strong>【第四步】对主机（Windows Server）进行扫描</strong></p><p>【<strong>第一种</strong>】 使用fping +ip进行扫描</p><p>&nbsp; 【命令】：fping 【IP】&nbsp;</p><p>&nbsp; 【例如】：fping 172.16.20.136</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<img src="api/attachment?type=courseDocument&amp;id=1148" style="height:336px; width:509px" /></p><p>&nbsp;&nbsp; 结果可以发现172.15.20.136是存活的</p><p>&nbsp;【<strong>第二种】使用【-g】参数对整个网段（Windows Server）进行存活检验</strong></p><p>&nbsp;【命令】fping -g 【ip】 &gt;&gt; xxx.txt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><p>&nbsp;【例如】fping -g 172.16.20.1/24 &gt;&gt; alive.txt</p><p>&nbsp;【解释】使用-g 参数的意思是我们对整个网段进行存活扫描 &gt;&gt;alive.txt是把扫描的结&nbsp;</p><p>&nbsp; 果保存在alive.txt这个文件里面 然后我们扫描完后cat alive.txt便可查看扫描情况</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <img src="api/attachment?type=courseDocument&amp;id=1145" style="height:161px; width:484px" /></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <img src="api/attachment?type=courseDocument&amp;id=1141" style="height:313px; width:484px" /></p><p>&nbsp; 在这里我们使用【fping &ndash;g】 对主机进行存活检查 但是在检测的过程中出现很多命</p><p>&nbsp; 令我们以随便一个命令讲解一下，意思就是说172.16.20.134通过ICMP协议这个主机对</p><p>&nbsp; 172.16.20.251 发送数据包 但是没有接受到回显所以就是Unreachable Cat alive.txt&nbsp;</p><p>&nbsp; 从回显的结果中看到有4台机器是存活的其他剩下的都是unreachable不存活的</p><p>&nbsp;</p><p><strong>&nbsp;</strong><strong>【第三种】使用【-ag】参数对整个网段（Windows Server）进行存活检验</strong></p><p>&nbsp;&nbsp; 【命令】fping -ag 【ip】 &gt;&gt; xx.txt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 【例如】fping -ag 172.16.20.1/24 &gt;&gt; alive1.txt</p><p>【解释】使用-ag和-g的区别就在于回显的结果 -ag仅仅回显存活的ip地址 -g的意思是</p><p>&nbsp;回显整个网段所有IP的存活情况</p><p>&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;<img src="api/attachment?type=courseDocument&amp;id=1143" style="height:312px; width:490px" /></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 结果发现也是存活的主机的IP地址 这样看起来更加的直观</p><p>&nbsp;</p><p><strong>&nbsp;</strong><strong>【第四种】使用【-ug】参数查看主机（Windows Server）查看整个局域网内</strong></p><p><strong>&nbsp; </strong><strong>部存活的机器</strong><strong>&nbsp; </strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 【命令】fping -ug 【ip】 &gt;&gt;xx.txt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 【例如】fping -ug 172.16.20.1/24 &gt;&gt; unlive.txt</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <img src="api/attachment?type=courseDocument&amp;id=1139" style="height:304px; width:490px" /></p><p>&nbsp;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <img src="api/attachment?type=courseDocument&amp;id=1149" style="height:329px; width:494px" /></p><p>&nbsp;&nbsp; 通过结果我们也是可以发现在整个局域网内不存活的主机的IP地址</p><p>&nbsp;</p><p><strong>&nbsp;</strong><strong>【第五种】使用【-s】统计结果</strong></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 【命令】fping -ag 【ip】 -s -n &gt;&gt;xx.txt&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 【例如】fping -ag 172.16.20.1/24 -s -n &gt;&gt;test2.txt</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 【解释】-s 参数是对最后结果的一个统计 -n 将目标以主机名或域名显示</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <img src="api/attachment?type=courseDocument&amp;id=1147" style="height:156px; width:502px" /></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <img src="api/attachment?type=courseDocument&amp;id=1142" style="height:316px; width:503px" /></p><p>这里可以发现有4个是存活的&nbsp; 剩下的是不存活的。</p><p>&nbsp;</p><p>实验结束，关闭虚拟机。</p>