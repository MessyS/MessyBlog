(function(){function t(){$(".g-left-options").click(function(){$(".g-left-options div").toggleClass("g-left-options-black"),$(".g-left-options-1").toggleClass("g-left-options-1-rotate"),$(".g-left-options-2").toggleClass("g-left-options-2-none"),$(".g-left-options-3").toggleClass("g-left-options-3-rotate"),$(".g-top-navigation").toggleClass("g-top-navigation-show")}),$(".g-top-navigation").click(function(){event.stopPropagation()})}function e(){$("#j-goTop").click(function(){return $("body,html").animate({scrollTop:0},300),!1})}function o(){$(window).width()<1e3?$(".g-head,.g-left-options").show():$(".g-head,.g-left-options").hide();var t=$(window).scrollTop();t<100?$("#j-goTop").fadeOut(500):$("#j-goTop").fadeIn(500)}function a(){$(window).scroll(function(){o()}),$(window).resize(function(){o()})}function i(){$("#j-top-navigation-fun-oauth").click(function(t){t.preventDefault(),$(".g-oauth").addClass("g-oauth-show"),$(".g-oauth").removeClass("g-oauth-hide")}),$("#j-oauth-sub-logIn").on("click",function(t){t.preventDefault();let e=$("#j-oauth-sub-logIn-meg");e.empty();let o=$(".g-oauth-signUp-list");for(var a=0;a<o.length;a++){let t="none"==o[a].style.display;if(t){e.html("<p>请正确填写完所有的值!</p>");break}$.ajax({type:"POST",url:"/login/",headers:{"X-CSRFToken":$.cookie("csrftoken")},data:{user:$("#j-oauth-username-LogIn").val(),pwd:md5($("#j-oauth-password-LogIn").val())},success:function(t){e.empty(),console.log(t),"adminSuc"==t?(e.html("<p style='color:#19b955'>登录成功!跳转中...</p>"),window.location.href="/manager/"):"userSuc"==t?e.html("<p style='color:#19b955'>登录成功!但是目前还木有用户页哦，请耐心等待(*´・ｖ・)</p>"):e.html("<p>用户名或密码错误!</p>")},error:function(){e.empty(),e.html("<p>网络错误！请稍后再试...</p>")}});break}}),$(".g-oauth-right-headers-logIn").click(function(t){t.preventDefault(),$(".g-oauth-right-form-block-logIn").show(),$(".g-oauth-right-form-block-signUp").hide(),$(".g-oauth-right-form-block-reSet").hide()}),$(".g-oauth-right-form-forget").click(function(t){t.preventDefault(),$(".g-oauth-right-form-block-logIn").hide(),$(".g-oauth-right-form-block-signUp").hide(),$(".g-oauth-right-form-block-reSet").show()}),$(".g-oauth-right-headers-signUp").click(function(t){t.preventDefault(),$(".g-oauth-right-form-block-logIn").hide(),$(".g-oauth-right-form-block-signUp").show(),$(".g-oauth-right-form-block-reSet").hide()}),$("#j-oauth-sub-reSet").on("click",function(t){t.preventDefault();let e=$(".g-oauth-reSet-list"),o=$("#j-oauth-sub-reSet-meg");o.empty();for(var a=0;a<e.length;a++){let t="none"==e[a].style.display;if(t){o.html("<p>请正确填写完所有的值!</p>");break}$.ajax({type:"POST",url:"/reset/",headers:{"X-CSRFToken":$.cookie("csrftoken")},data:{email:$("#j-oauth-email-reSet").val(),oldPwd:md5($("#j-oauth-oldPwd-reSet").val()),newPwd:md5($("#j-oauth-password-confirm-reSet").val())},success:function(t){"suc"==t?($("input").val(""),o.html("<p style='color:#19b955'>重置成功!快去登录吧</p>"),setTimeout(function(){$(".g-oauth-right-headers-logIn").trigger("click")},2e3)):"err1"==t?o.html("<p>请填写完所有的值</p>"):"err2"==t&&o.html("<p>用户名或密码错误!</p>")},error:function(){o.empty(),o.html("<p>网络错误！请稍后再试...</p>")}});break}}),$(".g-oauth-right-quickLogin").children().click(function(t){t.preventDefault(),alert("暂不支持第三方登录，敬请谅解")}),$("#j-oauth-sub-SignUp").on("click",function(t){t.preventDefault();let e=$(".g-oauth-signUp-list"),o=$("#j-oauth-sub-SignUp-meg");o.empty();for(var a=0;a<e.length;a++){let t="none"==e[a].style.display;if(t){o.html("<p>请正确填写完所有的值!</p>");break}$.ajax({type:"POST",url:"/signUp/",headers:{"X-CSRFToken":$.cookie("csrftoken")},data:{email:$("#j-oauth-email-SignUp").val(),pwd:md5($("#j-oauth-password-confirm-SignUp").val())},success:function(t){"suc"==t?($("input").val(""),o.html("<p style='color:#19b955'>注册成功!快去登录吧！"),setTimeout(function(){$(".g-oauth-right-headers-logIn").trigger("click")},2e3)):"err1"==t?o.html("<p>请填写完所有的值</p>"):"err2"==t&&o.html("<p>抱歉！该邮箱已经注册过了,试试另外的邮箱吧！</p>")},error:function(){o.html("<p>网络错误！请稍后再试...</p>")}});break}}),$(".g-oauth-exit").click(function(t){t.preventDefault(),$(this).parent().addClass("g-oauth-hide"),$(this).parent().removeClass("g-oauth-show")})}function n(){$("#j-oauth-password-reSet").focus(function(){$("#j-oauth-password-reSet-yes").hide(),$(this).next().hide()}),$("#j-oauth-password-reSet").change(function(){let t=$(this).val().toString();var e=/^(?![0-9]+$)(?![a-zA-Z]+$)(?![~!@#$%^&*()-_=+]+$)[0-9A-Za-z]{8,}$/;e.test(t)?$("#j-oauth-password-reSet-yes").fadeIn(500):($(this).next().html("规则:至少8个字符;包含英文字母和数字;允许110键键盘第一排的特殊字符"),$(this).next().show())}),$("#j-oauth-password-reSet").focus(function(){$("#j-oauth-password-reSet-confirm-yes").hide(),$(this).next().hide()}),$("#j-oauth-password-confirm-reSet").change(function(){let t=$(this).val().toString(),e=t==$("#j-oauth-password-confirm-reSet").val();e?$("#j-oauth-password-confirm-reSet").fadeIn(500):($(this).next().html("密码不一致!"),$(this).next().show())})}function s(){$("#j-oauth-email-SignUp").focus(function(){$("#j-oauth-email-SignUp-yes").hide(),$(this).next().hide()}),$("#j-oauth-email-SignUp").change(function(){let t=$(this).val().toString(),e=-1!=t.indexOf(".")&&-1!=t.indexOf("@");e?$("#j-oauth-email-SignUp-yes").fadeIn(500):($(this).next().html("请输入正确的邮箱!"),$(this).next().show())}),$("#j-oauth-password-SignUp").focus(function(){$("#j-oauth-password-SignUp-yes").hide(),$(this).next().hide()}),$("#j-oauth-password-SignUp").change(function(){let t=$(this).val().toString();var e=/^(?![0-9]+$)(?![a-zA-Z]+$)(?![~!@#$%^&*()-_=+]+$)[0-9A-Za-z]{8,}$/;e.test(t)?$("#j-oauth-password-SignUp-yes").fadeIn(500):($(this).next().html("规则:至少8个字符;包含英文字母和数字;允许110键键盘第一排的特殊字符"),$(this).next().show())}),$("#j-oauth-password-confirm-SignUp").focus(function(){$("#j-oauth-password-confirm-SignUp-yes").hide(),$(this).next().hide()}),$("#j-oauth-password-confirm-SignUp").change(function(){let t=$(this).val().toString(),e=t==$("#j-oauth-password-SignUp").val();e?$("#j-oauth-password-confirm-SignUp-yes").fadeIn(500):($(this).next().html("密码不一致!"),$(this).next().show())})}function r(){$("#j-top-navigation-fun-search").click(function(t){t.preventDefault(),$(".g-search").addClass("g-search-show"),$(".g-search").removeClass("g-search-hide")}),$(".g-search-exit").click(function(t){t.preventDefault(),$(this).parent().addClass("g-search-hide"),$(this).parent().removeClass("g-search-show")}),$.ajax({type:"POST",url:"/siteSearchHot/",headers:{"X-CSRFToken":$.cookie("csrftoken")},success:function(t){if(0!=t.length){for(var e=0;e<t.length;e++)$(".g-search-category-hot").append(`<div class='g-search-category-block g-search-category-block-hot'>${t[e]}</div>`);$(".g-search-category-block").on("click",function(){let t=$(this).html();$(".g-search-body-input").val(t)})}else $(".g-search-category-hot").append('<qwe style="display:block;text-indent: 2rem">暂无热词数据哦 >_< </qwe>')},error:function(){$(".g-search-category-hot").append("<a style='color=red;font-weight:600'>抱歉，热词索引失败!请刷新重试</a>")}}),$(".g-search-category-block g-search-category-block-hot,.g-search-category-block g-search-category-block-history").on("click",function(){let t=$(this).html();$(".g-search-body-input").val(t)});let t=$(".g-search-category-history-list"),e=localStorage.length;if(e<=10)for(let o=e;o>0;o--)t.append(`<div class='g-search-category-block g-search-category-block-history'>${localStorage.getItem(o)}</div>`);else for(let o=e;o>e-10;o--)t.append(`<div class='g-search-category-block g-search-category-block-history'>${localStorage.getItem(o)}</div>`);$("#j-search-category-history-clear").on("click",function(){localStorage.clear(),$(".g-search-category-history-list").empty(),t.append('<h4 style="color:#ff4843">删除成功!</h4>'),setTimeout(function(){$(".g-search-category-history-list").empty()},3e3)}),$(".g-search-body-sub").click(function(t){t.preventDefault();let e=$(this).prev().val();if(""==e)alert("请输入关键字!");else{let t=$(".g-search-category-block-history").length;t>=10&&$(".g-search-category-block-history:last").remove(),$(".g-search-category-history-list").prepend(`<div class='g-search-category-block g-search-category-block-history'>${e}</div>`),$(".g-search-category-block").on("click",function(){let t=$(this).html();$(".g-search-body-input").val(t)});let o=localStorage.length;localStorage.setItem(o+1,e),$resultList=$(".g-search-subResulte-list"),$resultList.html(`【 ${e} 】 搜索中，请稍后...`),$(".g-search-body-subResulte").show(),$.ajax({type:"POST",url:"/siteSearch/",headers:{"X-CSRFToken":$.cookie("csrftoken")},data:{keyword:e},success:function(t){if($resultList.empty(),0!=t.length){for(var o=0;o<t.length;o++)"title"==t[o].filter?$resultList.append(`<li><a href="/detail/${t[o].id} target='_blank'">${t[o].title}</a></li>`):$resultList.append(`<li id="j-search-content-more" style="display: none"><a href="/detail/${t[o].id}" target='_blank'>${t[o].title}</a></li>`);$resultList.append('\n\t\t\t\t\t\t\t\t<div style="width: 100%;text-align: center">\n\t\t\t\t\t\t\t\t\t<span \n\t\t\t\t\t\t\t\t\t\tstyle="cursor: pointer;font-size: 10px;padding: 5px 10px;border: 1px solid black;border-radius: 5px;display: inline-block;"\n\t\t\t\t\t\t\t\t\t\tonclick="$(\'#j-search-content-more\').show();$(this).hide()"   \n\t\t\t\t\t\t\t\t\t >查看全部相关结果</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t')}else $resultList.append(`<qwe style="display:block;text-indent: 2rem">抱歉,暂时没有关于【 ${e} 】的数据哦 >_< </qwe>`)},error:function(){$resultList.empty(),$resultList.append("<a style='color=red;font-weight:600'>抱歉，搜索失败!请重试</a>")}})}})}o(),t(),e(),a(),i(),n(),s(),r();var l=0,c=0;$(window).scroll(function(){if($(this).width()>900){if(l=$(this).scrollTop(),c<=l)$(".g-top-navigation").css("opacity","0");else{let t=$(".g-top-navigation");t.css("opacity","1"),l>100?(t.css("opacity","1"),t.addClass("g-top-navigation-show"),t.find("a").css("color","black"),t.find("#j-top-navigation-fun-search").css("border","0.1em solid black"),t.find("#j-top-navigation-fun-search").append("<style>#j-top-navigation-fun-search:before{background:black!important}</style>")):(t.removeClass("g-top-navigation-show"),t.find("a").css("color","white"),t.find("#j-top-navigation-fun-search").css("border","0.1em solid white"),t.find("#j-top-navigation-fun-search").append("<style>#j-top-navigation-fun-search:before{background:white!important}</style>"))}c=l}})})();